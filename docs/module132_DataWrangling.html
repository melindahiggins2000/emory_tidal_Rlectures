<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1.3.2: Data Wrangling – R Training - TIDAL Lectures</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0f678b7eab269e1f93ad2a885b46ecea.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0272949737e784d0dcbc7a02c8fdb0fd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module132_DataWrangling.html">1.3.2: Data Wrangling</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./tidal_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://www.project-tidal.org/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <a href="https://github.com/melindahiggins2000/emory_tidal_Rlectures" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module131_IntroRRStudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.1: Introduction to R and R Studio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module132_DataWrangling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1.3.2: Data Wrangling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module133_DataVis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.3: Data Visualization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module134_MissingWeight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.4: Missing Data and Sampling Weights</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module135_StatisticalTests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.5: Statistical Tests and Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module136_ReproducibleResearch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.6: Reproducible Research Principles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PRAMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PRAMS Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./additionalResources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Help and Resources</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#session-objectives" id="toc-session-objectives" class="nav-link active" data-scroll-target="#session-objectives">Session Objectives</a></li>
  <li><a href="#prework---before-you-begin" id="toc-prework---before-you-begin" class="nav-link" data-scroll-target="#prework---before-you-begin">0. Prework - Before You Begin</a>
  <ul>
  <li><a href="#install-packages" id="toc-install-packages" class="nav-link" data-scroll-target="#install-packages">Install Packages</a></li>
  </ul></li>
  <li><a href="#to-read-in-data." id="toc-to-read-in-data." class="nav-link" data-scroll-target="#to-read-in-data.">1. To read in data.</a>
  <ul>
  <li><a href="#begin-with-a-new-rstudio-project" id="toc-begin-with-a-new-rstudio-project" class="nav-link" data-scroll-target="#begin-with-a-new-rstudio-project">Begin with a NEW RStudio Project</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data">Importing Data</a>
  <ul class="collapse">
  <li><a href="#import-a-csv-file" id="toc-import-a-csv-file" class="nav-link" data-scroll-target="#import-a-csv-file"><strong>Import a CSV file</strong></a></li>
  <li><a href="#import-an-excel-file" id="toc-import-an-excel-file" class="nav-link" data-scroll-target="#import-an-excel-file"><strong>Import an EXCEL file</strong></a></li>
  <li><a href="#import-spss-data" id="toc-import-spss-data" class="nav-link" data-scroll-target="#import-spss-data"><strong>Import SPSS data</strong></a></li>
  <li><a href="#import-sas-data" id="toc-import-sas-data" class="nav-link" data-scroll-target="#import-sas-data"><strong>Import SAS data</strong></a></li>
  </ul></li>
  <li><a href="#exploring-built-in-datasets" id="toc-exploring-built-in-datasets" class="nav-link" data-scroll-target="#exploring-built-in-datasets">Exploring Built-in Datasets</a></li>
  </ul></li>
  <li><a href="#to-view-the-data." id="toc-to-view-the-data." class="nav-link" data-scroll-target="#to-view-the-data.">2. To view The Data.</a>
  <ul>
  <li><a href="#look-at-small-data-in-console" id="toc-look-at-small-data-in-console" class="nav-link" data-scroll-target="#look-at-small-data-in-console">Look at small data in Console</a></li>
  <li><a href="#look-the-structure-of-the-dataset" id="toc-look-the-structure-of-the-dataset" class="nav-link" data-scroll-target="#look-the-structure-of-the-dataset">Look the “structure” of the dataset</a></li>
  </ul></li>
  <li><a href="#to-subset-the-data---select-and-filter." id="toc-to-subset-the-data---select-and-filter." class="nav-link" data-scroll-target="#to-subset-the-data---select-and-filter.">3. To subset the data - select and filter.</a>
  <ul>
  <li><a href="#using-base-r-packages-and-functions" id="toc-using-base-r-packages-and-functions" class="nav-link" data-scroll-target="#using-base-r-packages-and-functions">Using base R packages and functions</a>
  <ul class="collapse">
  <li><a href="#view-parts-of-the-dataset" id="toc-view-parts-of-the-dataset" class="nav-link" data-scroll-target="#view-parts-of-the-dataset"><strong>View parts of the dataset</strong></a></li>
  <li><a href="#view-variables-in-dataset-by-name" id="toc-view-variables-in-dataset-by-name" class="nav-link" data-scroll-target="#view-variables-in-dataset-by-name"><strong>View variables in dataset by name</strong></a></li>
  </ul></li>
  <li><a href="#using-dplyr-functions" id="toc-using-dplyr-functions" class="nav-link" data-scroll-target="#using-dplyr-functions">Using <code>dplyr</code> functions</a>
  <ul class="collapse">
  <li><a href="#using-tidyverse-packages-and-functions" id="toc-using-tidyverse-packages-and-functions" class="nav-link" data-scroll-target="#using-tidyverse-packages-and-functions"><strong>Using <code>tidyverse</code> packages and functions</strong></a></li>
  <li><a href="#pick-columns-using-dplyrselect" id="toc-pick-columns-using-dplyrselect" class="nav-link" data-scroll-target="#pick-columns-using-dplyrselect"><strong>Pick columns using <code>dplyr::select()</code></strong></a></li>
  <li><a href="#workflow-using-the-pipe-operator" id="toc-workflow-using-the-pipe-operator" class="nav-link" data-scroll-target="#workflow-using-the-pipe-operator"><strong>Workflow using the pipe <code>%&gt;%</code> operator</strong></a></li>
  <li><a href="#select-variables-with-matching-using-starts_with" id="toc-select-variables-with-matching-using-starts_with" class="nav-link" data-scroll-target="#select-variables-with-matching-using-starts_with"><strong>Select variables with matching using <code>starts_with()</code></strong></a></li>
  <li><a href="#pick-rows-using-dplyrfilter" id="toc-pick-rows-using-dplyrfilter" class="nav-link" data-scroll-target="#pick-rows-using-dplyrfilter"><strong>Pick rows using <code>dplyr::filter()</code></strong></a></li>
  <li><a href="#filter-rows-using-matching-in-operator" id="toc-filter-rows-using-matching-in-operator" class="nav-link" data-scroll-target="#filter-rows-using-matching-in-operator"><strong>Filter rows using matching <code>%in%</code> operator</strong></a></li>
  <li><a href="#sortarrange-rows-using-dplyrarrange" id="toc-sortarrange-rows-using-dplyrarrange" class="nav-link" data-scroll-target="#sortarrange-rows-using-dplyrarrange"><strong>Sort/arrange rows using <code>dplyr::arrange()</code></strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#to-create-and-modify-variables." id="toc-to-create-and-modify-variables." class="nav-link" data-scroll-target="#to-create-and-modify-variables.">4. To create and modify variables.</a>
  <ul>
  <li><a href="#create-new-variable---base-r-approach" id="toc-create-new-variable---base-r-approach" class="nav-link" data-scroll-target="#create-new-variable---base-r-approach">Create New Variable - Base R Approach</a></li>
  <li><a href="#create-new-variable---dplyrmutate-approach" id="toc-create-new-variable---dplyrmutate-approach" class="nav-link" data-scroll-target="#create-new-variable---dplyrmutate-approach">Create New Variable - <code>dplyr::mutate()</code> Approach</a></li>
  <li><a href="#create-new-variable---add-labels-to-codes-by-creating-a-factor-type-variable" id="toc-create-new-variable---add-labels-to-codes-by-creating-a-factor-type-variable" class="nav-link" data-scroll-target="#create-new-variable---add-labels-to-codes-by-creating-a-factor-type-variable">Create New Variable - add labels to codes by creating a “factor” type variable</a></li>
  </ul></li>
  <li><a href="#to-get-data-summary-and-descriptive-statistics." id="toc-to-get-data-summary-and-descriptive-statistics." class="nav-link" data-scroll-target="#to-get-data-summary-and-descriptive-statistics.">5. To get data summary and descriptive statistics.</a>
  <ul>
  <li><a href="#getting-summary-statistics" id="toc-getting-summary-statistics" class="nav-link" data-scroll-target="#getting-summary-statistics">Getting summary statistics</a>
  <ul class="collapse">
  <li><a href="#summary-function" id="toc-summary-function" class="nav-link" data-scroll-target="#summary-function"><strong>summary() function</strong></a></li>
  <li><a href="#hmiscdescribe-function" id="toc-hmiscdescribe-function" class="nav-link" data-scroll-target="#hmiscdescribe-function"><strong>Hmisc::describe() function</strong></a></li>
  <li><a href="#psychdescribe-function" id="toc-psychdescribe-function" class="nav-link" data-scroll-target="#psychdescribe-function"><strong>psych::describe() function</strong></a></li>
  <li><a href="#base-r-specific-statistics-functions" id="toc-base-r-specific-statistics-functions" class="nav-link" data-scroll-target="#base-r-specific-statistics-functions"><strong>Base R specific statistics functions</strong></a></li>
  <li><a href="#dplyrsummarize-function" id="toc-dplyrsummarize-function" class="nav-link" data-scroll-target="#dplyrsummarize-function"><strong>dplyr::summarize() function</strong></a></li>
  </ul></li>
  <li><a href="#make-summary-tables" id="toc-make-summary-tables" class="nav-link" data-scroll-target="#make-summary-tables">Make summary tables</a>
  <ul class="collapse">
  <li><a href="#arsenal-package-for-tables" id="toc-arsenal-package-for-tables" class="nav-link" data-scroll-target="#arsenal-package-for-tables"><strong><code>arsenal</code> package for tables</strong></a></li>
  <li><a href="#gtsummary-package-for-tables" id="toc-gtsummary-package-for-tables" class="nav-link" data-scroll-target="#gtsummary-package-for-tables"><strong><code>gtsummary</code> package for tables</strong></a></li>
  <li><a href="#tableone-package-for-making-summary-tables" id="toc-tableone-package-for-making-summary-tables" class="nav-link" data-scroll-target="#tableone-package-for-making-summary-tables"><strong><code>tableone</code> package for making summary tables</strong></a></li>
  <li><a href="#gmodels-package-for-r-x-c-tables" id="toc-gmodels-package-for-r-x-c-tables" class="nav-link" data-scroll-target="#gmodels-package-for-r-x-c-tables"><strong><code>gmodels</code> package for R-x-C tables</strong></a></li>
  <li><a href="#table-inspiration" id="toc-table-inspiration" class="nav-link" data-scroll-target="#table-inspiration"><strong>Table Inspiration</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#exportingsaving-data" id="toc-exportingsaving-data" class="nav-link" data-scroll-target="#exportingsaving-data">6. Exporting/Saving Data</a>
  <ul>
  <li><a href="#using-the-save-function" id="toc-using-the-save-function" class="nav-link" data-scroll-target="#using-the-save-function">Using the <code>save()</code> function</a>
  <ul class="collapse">
  <li><a href="#save-mydata-as-.rdata-native-r-binary-format" id="toc-save-mydata-as-.rdata-native-r-binary-format" class="nav-link" data-scroll-target="#save-mydata-as-.rdata-native-r-binary-format"><strong>Save <code>mydata</code> as <code>*.Rdata</code> native R binary format</strong></a></li>
  <li><a href="#save-all-objects-in-global-environment-as-.rdata" id="toc-save-all-objects-in-global-environment-as-.rdata" class="nav-link" data-scroll-target="#save-all-objects-in-global-environment-as-.rdata"><strong>Save All Objects in Global Environment as <code>*.Rdata</code></strong></a></li>
  <li><a href="#save-more-than-one-object-in-global-environment-as-.rdata" id="toc-save-more-than-one-object-in-global-environment-as-.rdata" class="nav-link" data-scroll-target="#save-more-than-one-object-in-global-environment-as-.rdata"><strong>Save More than One Object in Global Environment as <code>*.Rdata</code></strong></a></li>
  <li><a href="#reading-objects-saved-as-.rdata-back-into-session" id="toc-reading-objects-saved-as-.rdata-back-into-session" class="nav-link" data-scroll-target="#reading-objects-saved-as-.rdata-back-into-session"><strong>Reading Objects Saved as <code>*.Rdata</code> Back Into Session</strong></a></li>
  </ul></li>
  <li><a href="#saveexport-data-to-other-formats" id="toc-saveexport-data-to-other-formats" class="nav-link" data-scroll-target="#saveexport-data-to-other-formats">Save/export data to other formats</a>
  <ul class="collapse">
  <li><a href="#exportwrite-csv-and-excel" id="toc-exportwrite-csv-and-excel" class="nav-link" data-scroll-target="#exportwrite-csv-and-excel"><strong>Export/Write</strong> CSV and EXCEL</a></li>
  <li><a href="#exportwrite-for-other-software-spss-sas-stata" id="toc-exportwrite-for-other-software-spss-sas-stata" class="nav-link" data-scroll-target="#exportwrite-for-other-software-spss-sas-stata"><strong>Export/Write</strong> for Other Software (SPSS, SAS, Stata)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#r-code-for-this-module" id="toc-r-code-for-this-module" class="nav-link" data-scroll-target="#r-code-for-this-module">R Code For This Module</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#other-helpful-resources" id="toc-other-helpful-resources" class="nav-link" data-scroll-target="#other-helpful-resources">Other Helpful Resources</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="module132_DataWrangling.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1.3.2: Data Wrangling</h1>
<p class="subtitle lead">(Asynchronous-Online)</p>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="session-objectives" class="level2">
<h2 class="anchored" data-anchor-id="session-objectives">Session Objectives</h2>
<ol type="1">
<li>To read in data.</li>
<li>To view the Data.</li>
<li>To subset the data - select and filter.</li>
<li>To create and modify variables.</li>
<li>To get data summary and descriptive statistics</li>
<li>Exporting/Saving Data</li>
</ol>
<hr>
</section>
<section id="prework---before-you-begin" class="level2">
<h2 class="anchored" data-anchor-id="prework---before-you-begin">0. Prework - Before You Begin</h2>
<section id="install-packages" class="level3">
<h3 class="anchored" data-anchor-id="install-packages">Install Packages</h3>
<p>Before you begin, please go ahead and install the following packages - these are all on CRAN, so you can install them using the RStudio Menu “Tools/Install” Packages interface:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/readr/" target="_blank"><code>readr</code> on CRAN</a> and <a href="https://readr.tidyverse.org/" target="_blank"><code>readr</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/readxl/" target="_blank"><code>readxl</code> on CRAN</a> and <a href="https://readxl.tidyverse.org/" target="_blank"><code>readxl</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/haven/" target="_blank"><code>haven</code> on CRAN</a> and <a href="https://haven.tidyverse.org/" target="_blank"><code>haven</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/dplyr/" target="_blank"><code>dplyr</code> on CRAN</a> and <a href="https://dplyr.tidyverse.org/" target="_blank"><code>dplyr</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/Hmisc/" target="_blank"><code>Hmisc</code> on CRAN</a> and <a href="https://hbiostat.org/r/hmisc/" target="_blank"><code>Hmisc</code>package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/psych/" target="_blank"><code>psych</code> on CRAN</a> and <a href="https://personality-project.org/r/psych/"><code>psych</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/arsenal/" target="_blank"><code>arsenal</code> on CRAN</a> and <a href="https://mayoverse.github.io/arsenal/" target="_blank"><code>arsenal</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/gtsummary/" target="_blank"><code>gtsummary</code> on CRAN</a> and <a href="https://www.danieldsjoberg.com/gtsummary/"><code>gtsummary</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/tableone/" target="_blank"><code>tableone</code> on CRAN</a></li>
<li><a href="https://cran.r-project.org/web/packages/gmodels/" target="_blank"><code>gmodels</code> on CRAN</a></li>
<li><a href="https://cran.r-project.org/web/packages/pkgsearch/" target="_blank"><code>pkgsearch</code> on CRAN</a></li>
<li><a href="https://cran.r-project.org/web/packages/palmerpenguins/" target="_blank"><code>palmerpenguins</code> on CRAN</a></li>
</ul>
<p>See <a href="module131_IntroRRStudio.html#install-and-load-r-packages-understanding-your-r-session" target="_blank">Module 1.3.1 on Installing Packages</a></p>
<hr>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="to-read-in-data." class="level2">
<h2 class="anchored" data-anchor-id="to-read-in-data.">1. To read in data.</h2>
<section id="begin-with-a-new-rstudio-project" class="level3">
<h3 class="anchored" data-anchor-id="begin-with-a-new-rstudio-project">Begin with a NEW RStudio Project</h3>
<p>Let’s begin with a new RStudio Project.</p>
<ol type="1">
<li>First click on the menu at top for “File/New Project”:</li>
</ol>
<p><img src="newproject.png" class="img-fluid" style="width:80.0%"></p>
<div style="page-break-after: always;"></div>
<ol start="2" type="1">
<li>Next choose either an “Existing Directory” or “New Directory” depending on whether you want to use a folder that already exists on your computer or you want to create a new folder.</li>
</ol>
<p><img src="newproject2.png" class="img-fluid" style="width:80.0%"></p>
<ol start="3" type="1">
<li>For now, let’s choose a “New Directory” and then select “New Project”</li>
</ol>
<p><img src="newproject3.png" class="img-fluid" style="width:80.0%"></p>
<div style="page-break-after: always;"></div>
<ol start="4" type="1">
<li>When the next window opens, as an example, I’m creating a new project folder called <code>myfirstRproject</code> for my RStudio project under my parent directory, <code>C:\MyGithub</code>. <em>Your folder names and directories will most likely be different than mine.</em></li>
</ol>
<p><img src="newproject4.png" class="img-fluid" style="width:80.0%"></p>
<ol start="5" type="1">
<li>So, if I look back on my computer in my file manager (I’m on a computer with Windows 11 operating system) - I can now see this new folder on my computer for <code>C:\MyGithub\myfirstRproject</code>.</li>
</ol>
<p><img src="newproject6.png" class="img-fluid" style="width:80.0%"></p>
<div style="page-break-after: always;"></div>
<ol start="6" type="1">
<li>Now let’s put some data into this folder. Feel free to move datasets of your own into this new RStudio project directory. But here are some test datasets you can download and place into this new directory on your computer - choose at least one to try out - right click on each link and use “Save As” to save the file on your computer in your new project folder.</li>
</ol>
<ul>
<li><a href="mydata.csv"><code>mydata.csv</code> - CSV (comma separated value) formatted data</a></li>
<li><a href="mydata.xlsx"><code>mydata.xlsx</code> - EXCEL file</a></li>
<li><a href="mydata.sav"><code>mydata.sav</code> - SPSS Dataset</a></li>
<li><a href="mydata.sas7bdat"><code>mydata.sas7bdat</code> - SAS Dataset</a></li>
<li><a href="Mydata_Codebook.pdf"><code>Mydata_Codebook.pdf</code> - Codebook Details on “mydata” dataset</a></li>
</ul>
<ol start="7" type="1">
<li>After putting these files into your new RStudio project folder, you should see something like this now in your RStudio Files Listing (bottom right window pane):</li>
</ol>
<p><img src="newproject7.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
</section>
<section id="importing-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-data">Importing Data</h3>
<p>Now that you’ve got some data in your RStudio project folder, let’s look at options for importing these datasets into your RStudio computing session.</p>
<p>Click on “File/Import Dataset” - and then choose the file format you want.</p>
<section id="import-a-csv-file" class="level4">
<h4 class="anchored" data-anchor-id="import-a-csv-file"><strong>Import a CSV file</strong></h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is a CSV file?
</div>
</div>
<div class="callout-body-container callout-body">
<p>CSV stands for “comma separated value” format. This format is what you would think - each value for a different column (or variable) is separated by a column and each new row represents a new record in the dataset.</p>
<p>CSV is widely accepted as a “universal” standard as a data format for easy exchange between different software and databases.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Comma-separated_values" target="_blank">Wikipedia Page on CSV</a></li>
<li><a href="https://www.loc.gov/preservation/digital/formats/fdd/fdd000323.shtml" target="_blank">Library of Congress Page on CSV</a></li>
<li>There is even a <a href="https://csvconf.com/" target="_blank">conference on CSV</a></li>
</ul>
</div>
</div>
<p>Here is an example of importing the <a href="mydata.csv"><code>mydata.csv</code> - CSV formatted data</a>. Let’s use the <code>From Text (readr)</code> option.</p>
<p><img src="import1.png" class="img-fluid" style="width:80.0%"></p>
<div style="page-break-after: always;"></div>
<p>Why should we use the “from text” option? Why do I not see a CSV option?</p>
<p>Technically the CSV format is TEXT. You can open a CSV file in a text editor and easily read it - even if you do not have proprietary software like Excel, Access, SPSS, SAS, etc. Here is a screen shot of what the “mydata.csv” file looks like in my text editor “Notepad” on my Windows 11 computer:</p>
<p>Notice that:</p>
<ul>
<li>The first row has text labels for the “variables” (columns) in the dataset - there are 14 column labels with each value separated by a <code>,</code> comma.</li>
<li>The remaining rows are the “data” for the dataset.</li>
<li>After the 1st row of labels, there are 21 rows of data.</li>
<li>Take a minute and notice there are some odd values, and odd patterns of missing data (two commas <code>,,</code> together indicate that value is missing for that column (variable)). <em>We’ll explore these issues further in later lesson modules.</em></li>
</ul>
<p><img src="mydatacsv.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>Once the “File/Import Data/From Text (readr)” opens, click on “Browse” and choose the <a href="mydata.csv"><code>mydata.csv</code></a> file. Assuming all goes well, this window will read the top of the datafile and show you a quick “Data Preview” to check that the import will work.</p>
<p>And on the bottom right, the “Code Preview” shows you the R code commands needed to import this dataset. You can then click on the little “clipboard” on the bottom right to copy this R code to your “clipboard”, <em>(the R code option will be explained below)</em>.</p>
<p>OR You can also just click “Import” and the R code will be executed for you and the dataset brought into your R computing session <em>(but this is NOT a good practice for reproducible research!)</em>.</p>
<p><img src="import2.png" class="img-fluid"></p>
<p>The better way is to save the R code commands to import the data so you will be able to reproduce all steps in your data analysis workflow using code as opposed to non-reproducible point-and-click steps.</p>
<p>Once you copied the R code above to your clipboard, go to “File/New File/R Script” to open a script programming window:</p>
<p><img src="import3.png" class="img-fluid" style="width:80.0%"></p>
<p>And then “paste” your R code into this window.</p>
<p>As you can see importing the <a href="mydata.csv"><code>mydata.csv</code></a> dataset, involves 2 steps:</p>
<ol type="1">
<li>Loading the <code>readr</code> package into your RStudio computing session, by running <code>library(readr)</code></li>
<li>Running the <code>read_csv()</code> function from the <code>readr</code> package and then assigning <code>&lt;-</code> this output into a new R data object called <code>mydata</code>.</li>
</ol>
<p><img src="import4.png" class="img-fluid"></p>
<p>To import the dataset, select these 2 lines of code and then click “Run” to run the R code. And be sure to click “Save” to save your first R program - for example “importdata.R”.</p>
<p><img src="import5.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>After running these 2 lines of code, you should see something like this - the code messages in the bottom left “Console” window pane and a new R data object “mydata” in the top right “Global Environment” window pane.</p>
<p><img src="import6.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
</section>
<section id="import-an-excel-file" class="level4">
<h4 class="anchored" data-anchor-id="import-an-excel-file"><strong>Import an EXCEL file</strong></h4>
<p>Let’s try another format. While you will probably encounter CSV (comma separated value) data files often (since nearly all data collection platforms, databases and software will be able to export this simple non-proprietary format), many people natively open/read CSV files in the EXCEL software. So you will probably also encounter EXCEL (<code>*.XLS</code> or <code>*.XLSX</code>) formatted data files.</p>
<p>In addition to an EXCEL file using a Microsoft proprietary format, EXCEL files can have formatting (font sizes, colors, borders) and can have multiple TABs (or SHEETs). Here are some screen shots of the <a href="mydata.xlsx"><code>mydata.xlsx</code> - EXCEL file</a> file.</p>
<p>The first “Data” TAB:</p>
<p><img src="mydataxls_data.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>The second “Codebook” TAB:</p>
<p><img src="mydataxls_codebook.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>To import an EXCEL file into R, we will use the same process as above, but this time we will select “File/Import Dataset/From Excel”:</p>
<p><img src="importxls.png" class="img-fluid" style="width:80.0%"></p>
<p>This process uses the <a href="https://readxl.tidyverse.org/reference/read_excel.html" target="_blank"><code>read_excel()</code> function</a> from the <a href="https://readxl.tidyverse.org" target="_blank"><code>readxl</code></a> package.</p>
<p>With the <code>read_excel()</code> function, we can specify several options including:</p>
<ul>
<li>Which TAB do you want to import <em>(for now we are only importing one data TAB at a time)</em>. We are selecting the “Data” TAB.</li>
<li>I’m leaving all of the rest as their defaults which include:
<ul>
<li>not changing the “Range”,</li>
<li>leaving “Max Rows” blank,</li>
<li>and leaving rows to “Skip” as 0, which can be useful if you receive files with a lot of “header” information at the top,,</li>
<li>leaving the “NA” box blank - but you could put in a value like “99” if you want all 99’s treated as missing - but this is applied to the ENTIRE dataset. We will look at these issues for individual variables below.</li>
</ul></li>
<li>Also notice that the checkboxes are selected for “First Row as Names” (which is the usual convention) and “Open Data Viewer”, which creates the <code>View(mydata)</code> in the “Code Preview” window to the right. You can skip this if you like.</li>
</ul>
<p>So in the “Code Preview” window to the right, we have specified the name of the data file <code>"mydata.xlsx"</code> and the “Data” TAB using the option <code>sheet = "Data"</code>. Remember to copy this code to the clipboard and save it in a <code>*.R</code> program script.</p>
<p><img src="importxls2.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>Here is the <code>importdata.R</code> program script we have so far for reading in the <code>"mydata.csv"</code> and <code>"mydata.xlsx"</code> data files. <em>At the moment, the second time we “create” the <code>mydata</code> R data object we are overwriting the previous one in the sequential code steps below.</em></p>
<p>Also notice I have added some comments which start with a <code>#</code> hashtag. Any text following a <code>#</code> will be ignored by R and not executed.</p>
<p><img src="importdata_Rscript.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
</section>
<section id="import-spss-data" class="level4">
<h4 class="anchored" data-anchor-id="import-spss-data"><strong>Import SPSS data</strong></h4>
<p>For data files from other “common” statistics software like SPSS, SAS and Stata, we can use the “File/Import Dataset/From SPSS (or From SAS or From Stata)”. All of these use <a href="https://haven.tidyverse.org/reference/index.html#reading-and-writing" target="_blank"><code>read_xxx()</code> functions from the <code>haven</code> package</a>.</p>
<p><img src="importother.png" class="img-fluid" style="width:80.0%"></p>
<p>Here is the code generated to import a SPSS datafile:</p>
<p><img src="importspss.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
</section>
<section id="import-sas-data" class="level4">
<h4 class="anchored" data-anchor-id="import-sas-data"><strong>Import SAS data</strong></h4>
<p>Importing a <code>*.sas7bdat</code> SAS datafile, is similar to SPSS - here is that code.</p>
<p>Notice that in addition to the datafile <code>"mydata.sas7bdat"</code>, the <code>read_sas()</code> function also shows <code>NULL</code>. When reading in a SAS file, you can also add arguments for the catalog file and encoding specifics. You can read more on the Help pages for the <a href="https://haven.tidyverse.org/reference/read_sas.html" target="_blank"><code>haven::read_sas()</code></a> function.</p>
<p><img src="importsas.png" class="img-fluid"></p>
<p><img src="readsashelp.png" class="img-fluid" style="width:80.0%"></p>
<div style="page-break-after: always;"></div>
<p>Here is a quick summary of all of the data import codes shown above <code>importdata.R</code>:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using <code>=</code> equals for parameter options inside a function
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that we used <code>sheet = "Data"</code> inside the <code>readxl::read_excel()</code> function. The single <code>=</code> equals sign is used to assign a value to a parameter or option inside a function.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the CSV file</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"mydata.csv"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the EXCEL file</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose the "Data" TAB</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"mydata.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Data"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Import a SPSS file</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"mydata.sav"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Import a SAS file</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">"mydata.sas7bdat"</span>, <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>haven</code> and <code>foreign</code> packages
</div>
</div>
<div class="callout-body-container callout-body">
<p>In addition to the <code>haven</code> package which is part of <code>tidyverse</code> and has been around since 2015, there is also another useful package for importing and exporting other statistical software formats that has been around since 1999 and it still being maintained - the <a href="https://cran.r-project.org/web/packages/foreign/index.html" target="_blank"><code>foreign</code> package</a>.</p>
<p>In addition to SPSS and Stata, the <code>foreign</code> package also can read in other formats like DBF, EPI INFO, Minitab, Octave, SSD (SAS Permanent Datasets via XPORT) SYSTAT, and ARFF.</p>
<p>Compare current downloads of these 2 packages at <a href="https://hadley.shinyapps.io/cran-downloads/">https://hadley.shinyapps.io/cran-downloads/</a>.</p>
<p>We can also review the history of these 2 packages using the <code>pkgsearch</code> package and the <code>cran_package_history()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># optionally install pkgsearch</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("pkgsearch")</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pkgsearch)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get history of haven package</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>havenhistory <span class="ot">&lt;-</span> <span class="fu">cran_package_history</span>(<span class="st">"haven"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get history of foreign package</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>foreignhistory <span class="ot">&lt;-</span> <span class="fu">cran_package_history</span>(<span class="st">"foreign"</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># display the earliest date on CRAN</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># for these 2 packages</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>havenhistory<span class="sc">$</span>date[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2015-03-01T08:18:16+00:00"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>foreignhistory<span class="sc">$</span>date[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1999-12-17T02:05:13+00:00"</code></pre>
</div>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="exploring-built-in-datasets" class="level3">
<h3 class="anchored" data-anchor-id="exploring-built-in-datasets">Exploring Built-in Datasets</h3>
<p>If you are looking for other datasets to test out functions or just need some data to play around with, the base R packages and other R packages (like <a href="https://cran.r-project.org/web/packages/palmerpenguins/" target="_blank"><code>palmerpenguins</code></a>) have data built-in to them. You can use these datasets.</p>
<p>We can take a look at what datasets are available using the <code>data()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take a look at the datasets available in the</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "datasets" base R package</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will open a viewer window (top left) - also notice that if you search for “Help” on the <code>pressure</code> dataset, you get a description of the dataset and the original source and citation. Notice in the “Help” window, the word <code>pressure</code> is followed by curly brackets indicating that the <code>pressure</code> dataset is in the built-in R package <code>{datasets}</code>.</p>
<p><img src="viewdatasets.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>We can see the <code>pressure</code> dataset is indeed in the <code>datasets</code> package if we keep scrolling down in the viewer window - also notice the <code>mtcars</code> dataset which you will often find in R tutorials and coding examples.</p>
<p><img src="viewdatasets2.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>Once you know where to look, you can then explore lots of these datasets. For example, we can take a look at the built-in <code>pressure</code> dataset, which includes 19 values showing the relationship between temperature in degrees Celsius and pressure in mm (or mercury). To “see” this built-in data object, just type the name <code>pressure</code> to see (or print out) the object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pressure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   temperature pressure
1            0   0.0002
2           20   0.0012
3           40   0.0060
4           60   0.0300
5           80   0.0900
6          100   0.2700
7          120   0.7500
8          140   1.8500
9          160   4.2000
10         180   8.8000
11         200  17.3000
12         220  32.1000
13         240  57.0000
14         260  96.0000
15         280 157.0000
16         300 247.0000
17         320 376.0000
18         340 558.0000
19         360 806.0000</code></pre>
</div>
</div>
<p>Normally most datasets are much larger than this little dataset. So, I would not advise trying to view most datasets by printing them to the “Console” window pane. Instead you can either click on the object in your “Global Environment” to view it - or you can run the <code>View()</code> function to open the viewer window.</p>
<p>You can “load” the built-in <code>pressure</code> dataset using the <code>data(pressure)</code> function to load the <code>pressure</code> dataset to load into your “Global Environment”, which loads the dataset into your R session.</p>
<div style="page-break-after: always;"></div>
<p>If we click on the little “Table icon” all the way to the right of the pressure dataset in the “Global Environment” window - or run <code>View(pressure)</code> - we can open the dataset in the Viewer window:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(pressure)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(pressure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="viewpressure.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explore Datasets in R Packages
</div>
</div>
<div class="callout-body-container callout-body">
<p>I encourage you to use the <code>data(package = "xxx")</code> function to see what, if any, datasets may be built-in to the various packages you may install and load during your R computing sessions.</p>
</div>
</div>
<div style="page-break-after: always;"></div>
<p>If you are interested in seeing other datasets in other R packages, go ahead and install the <a href="https://cran.r-project.org/web/packages/palmerpenguins/" target="_blank"><code>palmerpenguins</code></a> package and take a look at the <code>penguins</code> dataset included:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at datasets included with the</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># palmerpenguins dataset</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"palmerpenguins"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can learn more about the <code>penguins</code> dataset, by opening up the “Help” page for the dataset. You can also load the <code>palmerpenguins</code> package and then load the <code>penguins</code> dataset using this code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(penguins, <span class="at">package =</span> <span class="st">"palmerpenguins"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="penguinsdata.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>And clicking the the little data table icon after loading the <code>penguins</code> dataset into the “Global Environment”, you can see the dataset in the viewer window.</p>
<p><img src="viewpenguins.png" class="img-fluid"></p>
<hr>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="to-view-the-data." class="level2">
<h2 class="anchored" data-anchor-id="to-view-the-data.">2. To view The Data.</h2>
<section id="look-at-small-data-in-console" class="level3">
<h3 class="anchored" data-anchor-id="look-at-small-data-in-console">Look at small data in Console</h3>
<p>Let’s work with the <code>mydata</code> dataset that we imported above using the <code>readr::read_csv()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import the mydata.csv dataset</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"mydata.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is not a very large dataset - <code>mydata</code> has 21 rows (or observations) and 14 variables (or columns). So, we can view the whole thing by printing it to the “Console” window.</p>
<p>You’ll notice that depending on the size of your current “Console” window, font size, zoom settings and more, what you see may vary. Since we read this dataset in using the <code>readr</code> package, the data object is now a <a href="https://tibble.tidyverse.org/">“tibble” dataframe</a> which only shows the columns and rows that will reasonably show up in your “Console” window.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is a “tibble” <code>tbl_df</code>?
</div>
</div>
<div class="callout-body-container callout-body">
<p>As stated on the homepage for the <code>tibble</code> package at <a href="https://tibble.tidyverse.org/" target="_blank">https://tibble.tidyverse.org/</a>, a “tibble” is</p>
<blockquote class="blockquote">
<p>“… a modern reimagining of the data.frame, keeping what time has proven to be effective, and throwing out what is not.”</p>
</blockquote>
<p>Also a “tibble” has</p>
<blockquote class="blockquote">
<p>“… an enhanced print() method which makes them easier to use with large datasets containing complex objects.”</p>
</blockquote>
</div>
</div>
<p>And the output below also lists what kind of column each variable is. For example,</p>
<ul>
<li><code>Age</code> is a <code>&lt;dbl&gt;</code> indicating it is a numeric variable saved using double-precision, whereas</li>
<li><code>GenderSTR</code> is <code>&lt;chr&gt;</code> indicating this is a text or character (or “string”) type variable.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print the dataset into the Console</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>mydata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 14
   SubjectID   Age WeightPRE WeightPOST Height   SES GenderSTR GenderCoded    q1
       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
 1         1    45        68        145    5.6     9 m                   1     4
 2         2    50       167        166    5.4     2 f                   2     3
 3         3    35       143        135    5.6     2 &lt;NA&gt;               NA     3
 4         4    44       216        201    5.6     2 m                   1     4
 5         5    32       243        223    6       2 m                   1     5
 6         6    48       165        145    5.2     2 f                   2     2
 7         8    50        60        132    3.3     2 m                   1     3
 8         9    51       110        108    5.1     3 f                   2     1
 9        12    46       167        158    5.5     2 F                   2     1
10        14    35       190        200    5.8     1 Male                1     4
# ℹ 11 more rows
# ℹ 5 more variables: q2 &lt;dbl&gt;, q3 &lt;dbl&gt;, q4 &lt;dbl&gt;, q5 &lt;dbl&gt;, q6 &lt;dbl&gt;</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="look-the-structure-of-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="look-the-structure-of-the-dataset">Look the “structure” of the dataset</h3>
<p>You can also view the different kinds of variables in the dataset using the <code>str()</code> or “structure” function - which lists the type of variable, the number of elements in each column [1:21] indicates each column has 21 elements (or 21 rows) and the other values are a quick “peek” at the data inside the dataset. For example, the first 3 people in this dataset are ages 45, 50 and 35.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [21 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ SubjectID  : num [1:21] 1 2 3 4 5 6 8 9 12 14 ...
 $ Age        : num [1:21] 45 50 35 44 32 48 50 51 46 35 ...
 $ WeightPRE  : num [1:21] 68 167 143 216 243 165 60 110 167 190 ...
 $ WeightPOST : num [1:21] 145 166 135 201 223 145 132 108 158 200 ...
 $ Height     : num [1:21] 5.6 5.4 5.6 5.6 6 5.2 3.3 5.1 5.5 5.8 ...
 $ SES        : num [1:21] 9 2 2 2 2 2 2 3 2 1 ...
 $ GenderSTR  : chr [1:21] "m" "f" NA "m" ...
 $ GenderCoded: num [1:21] 1 2 NA 1 1 2 1 2 2 1 ...
 $ q1         : num [1:21] 4 3 3 4 5 2 3 1 1 4 ...
 $ q2         : num [1:21] NA 4 4 2 3 5 NA 4 1 44 ...
 $ q3         : num [1:21] NA 1 2 2 5 5 4 1 5 1 ...
 $ q4         : num [1:21] 4 40 3 1 2 1 3 3 5 1 ...
 $ q5         : num [1:21] 4 3 5 1 4 4 9 1 1 4 ...
 $ q6         : num [1:21] 5 2 2 9 1 5 2 4 2 5 ...
 - attr(*, "spec")=
  .. cols(
  ..   SubjectID = col_double(),
  ..   Age = col_double(),
  ..   WeightPRE = col_double(),
  ..   WeightPOST = col_double(),
  ..   Height = col_double(),
  ..   SES = col_double(),
  ..   GenderSTR = col_character(),
  ..   GenderCoded = col_double(),
  ..   q1 = col_double(),
  ..   q2 = col_double(),
  ..   q3 = col_double(),
  ..   q4 = col_double(),
  ..   q5 = col_double(),
  ..   q6 = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<p>You can also interactively <code>View</code> the data by clicking on the data icon and you can also click the little “table” icon to the far right next to the dataset in the “Global Environment”to open the data viewer window on the left.</p>
<p>You can also click on the little blue circle to the left of the <code>mydata</code> dataset to change the arrow from facing right <svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4d8ebd;overflow:visible;position:relative;"><path d="M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM241 377c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l87-87-87-87c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L345 239c9.4 9.4 9.4 24.6 0 33.9L241 377z"></path></svg> to facing down <svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4d8ebd;overflow:visible;position:relative;"><path d="M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"></path></svg> to see the “structure” of the data in the “Global Environment”.</p>
<p><img src="viewmydata.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="to-subset-the-data---select-and-filter." class="level2">
<h2 class="anchored" data-anchor-id="to-subset-the-data---select-and-filter.">3. To subset the data - select and filter.</h2>
<section id="using-base-r-packages-and-functions" class="level3">
<h3 class="anchored" data-anchor-id="using-base-r-packages-and-functions">Using base R packages and functions</h3>
<section id="view-parts-of-the-dataset" class="level4">
<h4 class="anchored" data-anchor-id="view-parts-of-the-dataset"><strong>View parts of the dataset</strong></h4>
<p>Now let’s “explore” the data by viewing sections of it.</p>
<p>Using base R commands, we can use functions like <code>head()</code> and <code>tail()</code> with each showing either the top or bottom 6 rows of the dataset. We can add a number to the function call to see more or less rows if we wish.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at top 6 rows of data</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
  SubjectID   Age WeightPRE WeightPOST Height   SES GenderSTR GenderCoded    q1
      &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
1         1    45        68        145    5.6     9 m                   1     4
2         2    50       167        166    5.4     2 f                   2     3
3         3    35       143        135    5.6     2 &lt;NA&gt;               NA     3
4         4    44       216        201    5.6     2 m                   1     4
5         5    32       243        223    6       2 m                   1     5
6         6    48       165        145    5.2     2 f                   2     2
# ℹ 5 more variables: q2 &lt;dbl&gt;, q3 &lt;dbl&gt;, q4 &lt;dbl&gt;, q5 &lt;dbl&gt;, q6 &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the bottom 10 rows of data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mydata, <span class="at">n=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 14
   SubjectID   Age WeightPRE WeightPOST Height   SES GenderSTR GenderCoded    q1
       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
 1        19    40       200        195    6.1     1 f                   2     1
 2        21    99       180        185    5.9     3 f                   2     2
 3        22    52       240        220    6.5     2 m                   1     2
 4        23    24       250        240    6.4     2 M                   1     5
 5        24    35       175        174    5.8     2 F                   2     5
 6        27    51       220        221    6.3     2 m                   1     4
 7        28    43       230         98    2.6     2 m                   1    11
 8        30    36       190        180    5.7     1 female              2     5
 9        32    44       260        109    6.4     3 male                1     1
10        NA    NA        NA         NA   NA      NA &lt;NA&gt;               NA    NA
# ℹ 5 more variables: q2 &lt;dbl&gt;, q3 &lt;dbl&gt;, q4 &lt;dbl&gt;, q5 &lt;dbl&gt;, q6 &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What are these wierd <code>NA</code>s?
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>NA</code> letters that show up is how R stores missing data. If the dataset you import has a blank cell (for either numeric or character type data), then R interprets that as “not available” which is indicated by <code>NA</code>. <code>NA</code> is a reserved word in R specifically set aside for handling missing values. </p>
<p>You can learn more about <code>NA</code> by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="cn">NA</span>, <span class="at">package =</span> <span class="st">"base"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>You can also view different parts of the data by using square brackets <code>[]</code> to select specific rows and columns using <code>[row, column]</code> index indicators.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the values in rows 1-4</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and in columns 1-3</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  SubjectID   Age WeightPRE
      &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
1         1    45        68
2         2    50       167
3         3    35       143
4         4    44       216</code></pre>
</div>
</div>
<p>To select all of a given row or column just leave that index blank.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show all of rows 1-2</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
  SubjectID   Age WeightPRE WeightPOST Height   SES GenderSTR GenderCoded    q1
      &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
1         1    45        68        145    5.6     9 m                   1     4
2         2    50       167        166    5.4     2 f                   2     3
# ℹ 5 more variables: q2 &lt;dbl&gt;, q3 &lt;dbl&gt;, q4 &lt;dbl&gt;, q5 &lt;dbl&gt;, q6 &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show all of columns 3-4</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>mydata[ ,<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   WeightPRE WeightPOST
       &lt;dbl&gt;      &lt;dbl&gt;
 1        68        145
 2       167        166
 3       143        135
 4       216        201
 5       243        223
 6       165        145
 7        60        132
 8       110        108
 9       167        158
10       190        200
# ℹ 11 more rows</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="view-variables-in-dataset-by-name" class="level4">
<h4 class="anchored" data-anchor-id="view-variables-in-dataset-by-name"><strong>View variables in dataset by name</strong></h4>
<p>We can also select columns from a dataset using the variable (or column) name. To see the names of all of the variables in a dataset, use the <code>names()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list variable names in mydata</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "SubjectID"   "Age"         "WeightPRE"   "WeightPOST"  "Height"     
 [6] "SES"         "GenderSTR"   "GenderCoded" "q1"          "q2"         
[11] "q3"          "q4"          "q5"          "q6"         </code></pre>
</div>
</div>
<p>We can use the <code>$</code> “dollar sign” operator to “select” named variables out of a dataset. Let’s look at all of the ages in <code>mydata</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at all of the ages</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of the 21 people in mydata</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>Age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 45 50 35 44 32 48 50 51 46 35 36 40 99 52 24 35 51 43 36 44 NA</code></pre>
</div>
</div>
<p>We can also use these variable names with the <code>[]</code> brackets in base R syntax. And we use the <code>c()</code> combine function to help us put a list together. Let’s look at the 2 weight columns in the dataset. Put the variable names inside <code>""</code> double quotes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show all rows for</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the 2 weight variables in mydata</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>mydata[ , <span class="fu">c</span>(<span class="st">"WeightPRE"</span>, <span class="st">"WeightPOST"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   WeightPRE WeightPOST
       &lt;dbl&gt;      &lt;dbl&gt;
 1        68        145
 2       167        166
 3       143        135
 4       216        201
 5       243        223
 6       165        145
 7        60        132
 8       110        108
 9       167        158
10       190        200
# ℹ 11 more rows</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="using-dplyr-functions" class="level3">
<h3 class="anchored" data-anchor-id="using-dplyr-functions">Using <code>dplyr</code> functions</h3>
<section id="using-tidyverse-packages-and-functions" class="level4">
<h4 class="anchored" data-anchor-id="using-tidyverse-packages-and-functions"><strong>Using <code>tidyverse</code> packages and functions</strong></h4>
<p>As you can see while base R is very powerful on it’s own, the syntax is less than intuitive. There is a whole suite of R packages that are designed to work together and use a different syntax that improves programming workflow and readability.</p>
<p>Learn more about the suite of <a href="https://www.tidyverse.org/" target="_blank"><code>tidyverse</code></a> packages. You’ve already used two of these, <a href="https://readr.tidyverse.org/" target="_blank"><code>readr</code></a> and <a href="https://haven.tidyverse.org/" target="_blank"><code>haven</code></a> are both part of <code>tidyverse</code> for importing datasets.</p>
<p>Another one of these <code>tidyverse</code> packages, <a href="https://dplyr.tidyverse.org/" target="_blank"><code>dplyr</code></a> is a very good package for “data wrangling”.</p>
</section>
<section id="pick-columns-using-dplyrselect" class="level4">
<h4 class="anchored" data-anchor-id="pick-columns-using-dplyrselect"><strong>Pick columns using <code>dplyr::select()</code></strong></h4>
<p>Instead of using the base R <code>$</code> selector, the <code>dplyr</code> package has a <code>select()</code> function where you simply choose variables using their name. Let’s look at <code>Height</code> and <code>q1</code> from the <code>mydata</code> dataset.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using package::function() syntax
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is good coding practice, especially when loading several packages at once into your computing session, to make sure you are calling the exact function you want from a specific package. So, I’m using the syntax of <code>package::function()</code> to help keep track of which package and which function is being used below.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load dplyr package</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># select Height and q1 from mydata</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(mydata, <span class="fu">c</span>(Height, q1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   Height    q1
    &lt;dbl&gt; &lt;dbl&gt;
 1    5.6     4
 2    5.4     3
 3    5.6     3
 4    5.6     4
 5    6       5
 6    5.2     2
 7    3.3     3
 8    5.1     1
 9    5.5     1
10    5.8     4
# ℹ 11 more rows</code></pre>
</div>
</div>
</section>
<section id="workflow-using-the-pipe-operator" class="level4">
<h4 class="anchored" data-anchor-id="workflow-using-the-pipe-operator"><strong>Workflow using the pipe <code>%&gt;%</code> operator</strong></h4>
<p>Another improvement of the <code>tidyverse</code> approach of R programming is to use the pipe <code>%&gt;%</code> operator. Basically what this syntax does is take the results from “A” and pipe it into –&gt; the next “B” function, e.g.&nbsp;<code>A %&gt;% B</code> so we can begin to “daisy-chain” a sequence of programming steps together into a logical workflow that is easy to “read” and follow.</p>
<p>Here is a working example to show the same variable selection process we did above, but now we will be using the <code>dplyr::select()</code> function. The code below takes the <code>mydata</code> dataset and pipes <code>%&gt;%</code> it into the <code>select()</code> function. We were also able to drop using the <code>c()</code> function here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># start with mydata and then </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># select Height and q1 from mydata</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Height, q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   Height    q1
    &lt;dbl&gt; &lt;dbl&gt;
 1    5.6     4
 2    5.4     3
 3    5.6     3
 4    5.6     4
 5    6       5
 6    5.2     2
 7    3.3     3
 8    5.1     1
 9    5.5     1
10    5.8     4
# ℹ 11 more rows</code></pre>
</div>
</div>
<p>We could even add the base R <code>head()</code> function here. If we put each code step on a separate line, you can now see that we are [1] taking the <code>mydata</code> dataset “and then” [2] selecting 2 variables “and then” [3] looking at the top 6 rows of the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select Height and q1 from mydata</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and show only the top 6 rows</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Height, q1) <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  Height    q1
   &lt;dbl&gt; &lt;dbl&gt;
1    5.6     4
2    5.4     3
3    5.6     3
4    5.6     4
5    6       5
6    5.2     2</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TL;DR If <code>%&gt;%</code> is a pipe, then what is <code>|&gt;</code>??
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>%&gt;%</code> pipe operator is implemented within <code>tidyverse</code> from the <code>magrittr</code> package which is used by the <code>tidyverse</code> packages which started being used quite extensively by R programmers over the last decade.</p>
<p>However, the rest of the R development community <em>(which is much larger than just those who use the <code>tidyverse</code> suite)</em> also recently added a new base R pipe operator <code>|&gt;</code> (since R version 4.1.0).</p>
<p>Learn more in this <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/" target="_blank"><code>tidyverse</code> blog post from 2023</a></p>
</div>
</div>
<p>So, you do have the option to also use the base R <code>|&gt;</code> pipe operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select Height and q1 from mydata</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and show only the top 6 rows</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">|&gt;</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Height, q1) <span class="sc">|&gt;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  Height    q1
   &lt;dbl&gt; &lt;dbl&gt;
1    5.6     4
2    5.4     3
3    5.6     3
4    5.6     4
5    6       5
6    5.2     2</code></pre>
</div>
</div>
<p>For now, we will stay with the <code>%&gt;%</code> operator for consistency. But be aware that you will see both approaches on the Internet when “Googling” for answers.</p>
</section>
<section id="select-variables-with-matching-using-starts_with" class="level4">
<h4 class="anchored" data-anchor-id="select-variables-with-matching-using-starts_with"><strong>Select variables with matching using <code>starts_with()</code></strong></h4>
<p>When using <code>dplyr::select()</code> to select variables, there are several “helper functions” that are useful for “selection”. You can see a list of these functions by running <code>help("starts_with", package = "tidyselect")</code>. These “selection helper” functions are actually in the <code>tidyselect</code> package which is loaded with the <code>dplyr</code> package.</p>
<p>Let’s use these functions to pull out all of the Likert-scaled “question” variables that start with the letter <code>"q"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"q"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 6
      q1    q2    q3    q4    q5    q6
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     4    NA    NA     4     4     5
 2     3     4     1    40     3     2
 3     3     4     2     3     5     2
 4     4     2     2     1     1     9
 5     5     3     5     2     4     1
 6     2     5     5     1     4     5
 7     3    NA     4     3     9     2
 8     1     4     1     3     1     4
 9     1     1     5     5     1     2
10     4    44     1     1     4     5
# ℹ 11 more rows</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="pick-rows-using-dplyrfilter" class="level4">
<h4 class="anchored" data-anchor-id="pick-rows-using-dplyrfilter"><strong>Pick rows using <code>dplyr::filter()</code></strong></h4>
<p>In addition to selecting columns or variables from your dataset, you can also pull out a subset of your data by “filtering” out only the rows you want.</p>
<p>For example, suppose we only want to look at the <code>Age</code>, <code>WeightPRE</code> for the Females in the dataset indicates by <code>GenderCoded</code> equal to 2.</p>
<p>For reference, take a look at the <a href="Mydata_Codebook.pdf" target="_blank"><code>mydata</code> codebook</a> - and here is a screenshot as well:</p>
<p><img src="mydataxls_codebook.png" class="img-fluid"></p>
<div style="page-break-after: always;"></div>
<p>Notice that:</p>
<ul>
<li>I changed the order of the columns, which is OK,</li>
<li>and to filter out and KEEP only the rows for females, I typed <code>GenderCoded == 2</code> using two equal signs <code>==</code>. R uses two <code>==</code> equal signs to perform a logical operation to ask does the variable <code>GenderCoded</code> equal the value of 2, with either a <code>TRUE</code> or <code>FALSE</code> result. Only the rows with a <code>TRUE</code> result are shown.</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be careful not to mix up <code>=</code> and <code>==</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Odds are you will get errors at some point due to typos or other issues, but a common error is to use a single <code>=</code> equals sign when trying to perform a logic operation. Remember to use 2 equals signs <code>==</code> if you are trying to perform a <code>TRUE/FALSE</code> operation and use only 1 equals sign <code>=</code> when assigning a value to a function argument.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns from mydata</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and then only show rows for females</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GenderCoded, Age, WeightPRE) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(GenderCoded <span class="sc">==</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
  GenderCoded   Age WeightPRE
        &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
1           2    50       167
2           2    48       165
3           2    51       110
4           2    46       167
5           2    40       200
6           2    99       180
7           2    35       175
8           2    36       190</code></pre>
</div>
</div>
<p>Here is an example of the error you will get if you use a single <code>=</code> sign instead of <code>==</code> two.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns from mydata</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and then only show rows for females</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GenderCoded, Age, WeightPRE) <span class="sc">%&gt;%</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="at">GenderCoded =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Error in `filter()`:
! We detected a named input.
ℹ This usually means that you've used `=` instead of `==`.
ℹ Did you mean `GenderCoded == 2`?
Run `rlang::last_trace()` to see where the error occurred.</code></pre>
<div style="page-break-after: always;"></div>
</section>
<section id="filter-rows-using-matching-in-operator" class="level4">
<h4 class="anchored" data-anchor-id="filter-rows-using-matching-in-operator"><strong>Filter rows using matching <code>%in%</code> operator</strong></h4>
<p>Another helpful operator in R is the <code>%in%</code> operator used for matching. Let’s suppose we wanted to pull out the rows for specific subject IDs - perhaps you want to review only these records.</p>
<p>Let’s pull out the data for only IDs 14, 21 and 24. Rather than writing a complicated if-then-else set of code steps, we can search for these IDs and only the rows with these IDs will be kept.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SubjectID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">21</span>, <span class="dv">24</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  SubjectID   Age WeightPRE WeightPOST Height   SES GenderSTR GenderCoded    q1
      &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
1        14    35       190        200    5.8     1 Male                1     4
2        21    99       180        185    5.9     3 f                   2     2
3        24    35       175        174    5.8     2 F                   2     5
# ℹ 5 more variables: q2 &lt;dbl&gt;, q3 &lt;dbl&gt;, q4 &lt;dbl&gt;, q5 &lt;dbl&gt;, q6 &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="sortarrange-rows-using-dplyrarrange" class="level4">
<h4 class="anchored" data-anchor-id="sortarrange-rows-using-dplyrarrange"><strong>Sort/arrange rows using <code>dplyr::arrange()</code></strong></h4>
<p>Here is another helpful function from <code>dplyr</code>. Suppose we want to find the 5 oldest people in <code>mydata</code> and show their IDs.</p>
<p>Let’s use the <code>dplyr::arrange()</code> function which will sort our data based on the variable we specify in increasing order (lowest to highest) by default. We will add the <code>desc()</code> function to sort decreasing from largest to smallest.</p>
<p>Learn more by running <code>help(arrange, package = "dplyr")</code></p>
<p><em>Note: There was someone with age 99 in this made-up dataset.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take mydata</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># select SubjectID and Age</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sort descending by Age</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># show the top 5 IDs and Ages</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SubjectID, Age) <span class="sc">%&gt;%</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Age)) <span class="sc">%&gt;%</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  SubjectID   Age
      &lt;dbl&gt; &lt;dbl&gt;
1        21    99
2        22    52
3         9    51
4        27    51
5         2    50</code></pre>
</div>
</div>
<p>The oldest people are subject IDs 21, 22, 9, 27 and 2 who are age 99, 52, 51, 51 and 50 years old respectively.</p>
<hr>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="to-create-and-modify-variables." class="level2">
<h2 class="anchored" data-anchor-id="to-create-and-modify-variables.">4. To create and modify variables.</h2>
<p>To create and add new variables to the dataset, we can use either a base R approach or use the <code>mutate()</code> function from the <code>dplyr</code> package. Let’s take a look at both approaches. In the <code>mydata</code> dataset, we have <code>Height</code> in decimal feet and we have <code>WeightPRE</code> and <code>WeightPOST</code> in pounds.</p>
<p>So, let’s compute BMI (body mass index) as follows from Height (in inches) and Weight (in pounds):</p>
<p><span class="math display">\[BMI = \left(\frac{weight_{(lbs)}}{(height_{(inches)})^2}\right) * 703\]</span></p>
<section id="create-new-variable---base-r-approach" class="level3">
<h3 class="anchored" data-anchor-id="create-new-variable---base-r-approach">Create New Variable - Base R Approach</h3>
<p>Create a new variable using the <code>$</code> selector operator. Then write out the mathematical equation. I also had to multiply the height in decimal feet * 12 to get inches.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute BMI for the PRE Weight</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>bmiPRE <span class="ot">&lt;-</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  (mydata<span class="sc">$</span>WeightPRE <span class="sc">*</span> <span class="dv">703</span>) <span class="sc">/</span> (mydata<span class="sc">$</span>Height <span class="sc">*</span> <span class="dv">12</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># look at result</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>bmiPRE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  10.58585  27.95901  22.26142  33.62564  32.95312  29.78997  26.89777
 [8]  20.64644  26.95156  27.57341  29.21039  26.23996  25.24418  27.73176
[15]  29.79702  25.39656  27.06041 166.10166  28.54938  30.98891        NA</code></pre>
</div>
</div>
<p>Look at the “Global Environment” or run the <code>str()</code> function to see if a new variable was added to <code>mydata</code> - which should now have 15 variables instead of only 14.</p>
<p>You can also list the variable names in the updated dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at updated data structure</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [21 × 15] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ SubjectID  : num [1:21] 1 2 3 4 5 6 8 9 12 14 ...
 $ Age        : num [1:21] 45 50 35 44 32 48 50 51 46 35 ...
 $ WeightPRE  : num [1:21] 68 167 143 216 243 165 60 110 167 190 ...
 $ WeightPOST : num [1:21] 145 166 135 201 223 145 132 108 158 200 ...
 $ Height     : num [1:21] 5.6 5.4 5.6 5.6 6 5.2 3.3 5.1 5.5 5.8 ...
 $ SES        : num [1:21] 9 2 2 2 2 2 2 3 2 1 ...
 $ GenderSTR  : chr [1:21] "m" "f" NA "m" ...
 $ GenderCoded: num [1:21] 1 2 NA 1 1 2 1 2 2 1 ...
 $ q1         : num [1:21] 4 3 3 4 5 2 3 1 1 4 ...
 $ q2         : num [1:21] NA 4 4 2 3 5 NA 4 1 44 ...
 $ q3         : num [1:21] NA 1 2 2 5 5 4 1 5 1 ...
 $ q4         : num [1:21] 4 40 3 1 2 1 3 3 5 1 ...
 $ q5         : num [1:21] 4 3 5 1 4 4 9 1 1 4 ...
 $ q6         : num [1:21] 5 2 2 9 1 5 2 4 2 5 ...
 $ bmiPRE     : num [1:21] 10.6 28 22.3 33.6 33 ...
 - attr(*, "spec")=
  .. cols(
  ..   SubjectID = col_double(),
  ..   Age = col_double(),
  ..   WeightPRE = col_double(),
  ..   WeightPOST = col_double(),
  ..   Height = col_double(),
  ..   SES = col_double(),
  ..   GenderSTR = col_character(),
  ..   GenderCoded = col_double(),
  ..   q1 = col_double(),
  ..   q2 = col_double(),
  ..   q3 = col_double(),
  ..   q4 = col_double(),
  ..   q5 = col_double(),
  ..   q6 = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list the variable names in the</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># updated dataset</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "SubjectID"   "Age"         "WeightPRE"   "WeightPOST"  "Height"     
 [6] "SES"         "GenderSTR"   "GenderCoded" "q1"          "q2"         
[11] "q3"          "q4"          "q5"          "q6"          "bmiPRE"     </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="create-new-variable---dplyrmutate-approach" class="level3">
<h3 class="anchored" data-anchor-id="create-new-variable---dplyrmutate-approach">Create New Variable - <code>dplyr::mutate()</code> Approach</h3>
<p>In the <code>dplyr</code> package, you can create or modify variables using the <a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank"><code>mutate()</code></a> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute BMI for the POST Weight</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the dplyr::mutate() function</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> mydata <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">bmiPOST =</span> (WeightPOST <span class="sc">*</span> <span class="dv">703</span>) <span class="sc">/</span> (Height <span class="sc">*</span> <span class="dv">12</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co"># check updates</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [21 × 16] (S3: tbl_df/tbl/data.frame)
 $ SubjectID  : num [1:21] 1 2 3 4 5 6 8 9 12 14 ...
 $ Age        : num [1:21] 45 50 35 44 32 48 50 51 46 35 ...
 $ WeightPRE  : num [1:21] 68 167 143 216 243 165 60 110 167 190 ...
 $ WeightPOST : num [1:21] 145 166 135 201 223 145 132 108 158 200 ...
 $ Height     : num [1:21] 5.6 5.4 5.6 5.6 6 5.2 3.3 5.1 5.5 5.8 ...
 $ SES        : num [1:21] 9 2 2 2 2 2 2 3 2 1 ...
 $ GenderSTR  : chr [1:21] "m" "f" NA "m" ...
 $ GenderCoded: num [1:21] 1 2 NA 1 1 2 1 2 2 1 ...
 $ q1         : num [1:21] 4 3 3 4 5 2 3 1 1 4 ...
 $ q2         : num [1:21] NA 4 4 2 3 5 NA 4 1 44 ...
 $ q3         : num [1:21] NA 1 2 2 5 5 4 1 5 1 ...
 $ q4         : num [1:21] 4 40 3 1 2 1 3 3 5 1 ...
 $ q5         : num [1:21] 4 3 5 1 4 4 9 1 1 4 ...
 $ q6         : num [1:21] 5 2 2 9 1 5 2 4 2 5 ...
 $ bmiPRE     : num [1:21] 10.6 28 22.3 33.6 33 ...
 $ bmiPOST    : num [1:21] 22.6 27.8 21 31.3 30.2 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "SubjectID"   "Age"         "WeightPRE"   "WeightPOST"  "Height"     
 [6] "SES"         "GenderSTR"   "GenderCoded" "q1"          "q2"         
[11] "q3"          "q4"          "q5"          "q6"          "bmiPRE"     
[16] "bmiPOST"    </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="create-new-variable---add-labels-to-codes-by-creating-a-factor-type-variable" class="level3">
<h3 class="anchored" data-anchor-id="create-new-variable---add-labels-to-codes-by-creating-a-factor-type-variable">Create New Variable - add labels to codes by creating a “factor” type variable</h3>
<p>As you probably noticed in the views of the <code>mydata</code> dataset above, there was originally a variable where people were allowed to enter their gender using free text (the <code>GenderSTR</code> variable). There were entries like “f”, “F”, “female”, “male”, “Male” and other variations. So, another variable <code>GenderCoded</code> was included where 1=male and 2=female, but when we look at <code>mydata$GenderCoded</code> all we see are 1’s and 2’s and <code>NA</code>s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>GenderCoded</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2 NA  1  1  2  1  2  2  1  1  2  2  1  1  2  1  1  2  1 NA</code></pre>
</div>
</div>
<p>It would be nice if we could add some labels. One way to do this is to convert <code>GenderCoded</code> from being a simple “numeric” variable to a new object class called a “factor” which includes both numeric values and text labels.</p>
<p>Here is the base R approach to create a new factor type variable. Learn more by looking at the help page for <code>factor()</code>, run <code>help(factor, package = "base")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new factor with labels</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>GenderCoded.f <span class="ot">&lt;-</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(mydata<span class="sc">$</span>GenderCoded,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># look at new variable</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>GenderCoded.f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] Male   Female &lt;NA&gt;   Male   Male   Female Male   Female Female Male  
[11] Male   Female Female Male   Male   Female Male   Male   Female Male  
[21] &lt;NA&gt;  
Levels: Male Female</code></pre>
</div>
</div>
<p>We can check the type each variable using the <code>class()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mydata<span class="sc">$</span>GenderCoded)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mydata<span class="sc">$</span>GenderCoded.f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
</div>
<p>Another quick way to see these <code>class</code> type differences is to use the <code>table()</code> function to get the frequencies of each distinct value. I’m also adding the <code>useNA = "ifany"</code> option to also get a count of any missing values. Learn more by running <code>help(table, package = "base")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># table of frequencies of GenderCoded - numeric class</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>GenderCoded, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   1    2 &lt;NA&gt; 
  11    8    2 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># table of GenderCoded.f - factor class</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>GenderCoded.f, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Male Female   &lt;NA&gt; 
    11      8      2 </code></pre>
</div>
</div>
<hr>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="to-get-data-summary-and-descriptive-statistics." class="level2">
<h2 class="anchored" data-anchor-id="to-get-data-summary-and-descriptive-statistics.">5. To get data summary and descriptive statistics.</h2>
<section id="getting-summary-statistics" class="level3">
<h3 class="anchored" data-anchor-id="getting-summary-statistics">Getting summary statistics</h3>
<section id="summary-function" class="level4">
<h4 class="anchored" data-anchor-id="summary-function"><strong>summary() function</strong></h4>
<p>One of the best functions that is part of base R is the <code>summary()</code> function. Let’s see what this gives us for the <code>mydata</code> dataset.</p>
<p>As you can see for all of the <code>numeric</code> class variables, the <code>summary()</code> function gives us the min, max, median, mean, 1st quartile and 3rd quartile and a count of the the number of missing <code>NA</code>s. So, you can see the mean <code>Age</code> is 44.8 and the median <code>Age</code> is 44.0.</p>
<p>For the character variable <code>GenderSTR</code> all we know is it has a length of 21.</p>
<p>But for the <code>factor</code> type variable <code>GenderCoded.f</code> we get the number of Males, Females and <code>NA</code>s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   SubjectID          Age          WeightPRE       WeightPOST   
 Min.   : 1.00   Min.   :24.00   Min.   : 60.0   Min.   : 98.0  
 1st Qu.: 5.75   1st Qu.:35.75   1st Qu.:166.5   1st Qu.:142.5  
 Median :15.00   Median :44.00   Median :190.0   Median :177.0  
 Mean   :15.30   Mean   :44.80   Mean   :185.2   Mean   :172.2  
 3rd Qu.:23.25   3rd Qu.:50.00   3rd Qu.:230.0   3rd Qu.:203.2  
 Max.   :32.00   Max.   :99.00   Max.   :260.0   Max.   :240.0  
 NA's   :1       NA's   :1       NA's   :1       NA's   :1      
     Height           SES       GenderSTR          GenderCoded   
 Min.   :2.600   Min.   :1.0   Length:21          Min.   :1.000  
 1st Qu.:5.475   1st Qu.:2.0   Class :character   1st Qu.:1.000  
 Median :5.750   Median :2.0   Mode  :character   Median :1.000  
 Mean   :5.550   Mean   :2.3                      Mean   :1.421  
 3rd Qu.:6.125   3rd Qu.:2.0                      3rd Qu.:2.000  
 Max.   :6.500   Max.   :9.0                      Max.   :2.000  
 NA's   :1       NA's   :1                        NA's   :2      
       q1              q2               q3             q4        
 Min.   : 1.00   Min.   : 1.000   Min.   :1.00   Min.   : 1.000  
 1st Qu.: 1.75   1st Qu.: 2.000   1st Qu.:1.00   1st Qu.: 2.000  
 Median : 3.00   Median : 4.000   Median :3.00   Median : 3.000  
 Mean   : 3.35   Mean   : 5.526   Mean   :3.15   Mean   : 5.062  
 3rd Qu.: 4.25   3rd Qu.: 4.500   3rd Qu.:4.25   3rd Qu.: 4.000  
 Max.   :11.00   Max.   :44.000   Max.   :9.00   Max.   :40.000  
 NA's   :1       NA's   :2        NA's   :1      NA's   :5       
       q5               q6            bmiPRE          bmiPOST     
 Min.   : 1.000   Min.   :1.000   Min.   : 10.59   Min.   :12.99  
 1st Qu.: 2.000   1st Qu.:2.000   1st Qu.: 26.03   1st Qu.:25.38  
 Median : 4.000   Median :4.000   Median : 27.65   Median :26.42  
 Mean   : 9.176   Mean   :3.706   Mean   : 33.78   Mean   :29.43  
 3rd Qu.: 5.000   3rd Qu.:5.000   3rd Qu.: 29.79   3rd Qu.:28.71  
 Max.   :99.000   Max.   :9.000   Max.   :166.10   Max.   :70.77  
 NA's   :4        NA's   :4       NA's   :1        NA's   :1      
 GenderCoded.f
 Male  :11    
 Female: 8    
 NA's  : 2    
              
              
              
              </code></pre>
</div>
</div>
<p>So, the <code>summary()</code> function is helpful, but you’ll notice we do not get the standard deviation. For some reason that was left out of the original <code>summary()</code> statistics function.</p>
<p>There are a few other descriptive statistics functions that can be useful. There is a <code>describe()</code> function in both the <a href="https://cran.r-project.org/web/packages/Hmisc/" target="_blank"><code>Hmisc</code> package</a> and the <a href="https://cran.r-project.org/web/packages/psych/" target="_blank"><code>psych</code></a> packages.</p>
</section>
<section id="hmiscdescribe-function" class="level4">
<h4 class="anchored" data-anchor-id="hmiscdescribe-function"><strong>Hmisc::describe() function</strong></h4>
<p>Let’s look at <code>Hmisc::describe()</code> for a couple of the variables.</p>
<p>You’ll notice that this still doesn’t give us the standard deviation, but we get the min, max, mean, median, as well as the <code>.05</code> <em>(5th percentile)</em> and others, and the output includes a summary of the frequency of the distinct values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age, GenderCoded.f, bmiPRE) <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  Hmisc<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. 

 3  Variables      21  Observations
--------------------------------------------------------------------------------
Age 
       n  missing distinct     Info     Mean  pMedian      Gmd      .05 
      20        1       14    0.994     44.8       43    13.81    31.60 
     .10      .25      .50      .75      .90      .95 
   34.70    35.75    44.00    50.00    51.10    54.35 
                                                                           
Value        24   32   35   36   40   43   44   45   46   48   50   51   52
Frequency     1    1    3    2    1    1    2    1    1    1    2    2    1
Proportion 0.05 0.05 0.15 0.10 0.05 0.05 0.10 0.05 0.05 0.05 0.10 0.10 0.05
               
Value        99
Frequency     1
Proportion 0.05

For the frequency table, variable is rounded to the nearest 0
--------------------------------------------------------------------------------
GenderCoded.f 
       n  missing distinct 
      19        2        2 
                        
Value        Male Female
Frequency      11      8
Proportion  0.579  0.421
--------------------------------------------------------------------------------
bmiPRE 
       n  missing distinct     Info     Mean  pMedian      Gmd      .05 
      20        1       20        1    33.78    27.73    18.52    20.14 
     .10      .25      .50      .75      .90      .95 
   22.10    26.03    27.65    29.79    33.02    40.25 

10.5858489229025 (1, 0.05), 20.6464394036482 (1, 0.05), 22.2614175878685 (1,
0.05), 25.2441827061189 (1, 0.05), 25.3965599815035 (1, 0.05), 26.2399593896503
(1, 0.05), 26.8977655341292 (1, 0.05), 26.9515610651974 (1, 0.05),
27.0604126424232 (1, 0.05), 27.5734079799181 (1, 0.05), 27.7317554240631 (1,
0.05), 27.9590096784027 (1, 0.05), 28.5493827160494 (1, 0.05), 29.2103855937103
(1, 0.05), 29.7899716469428 (1, 0.05), 29.7970241970486 (1, 0.05),
30.9889051649305 (1, 0.05), 32.953125 (1, 0.05), 33.6256377551021 (1, 0.05),
166.101660092045 (1, 0.05)

For the frequency table, variable is rounded to the nearest 0
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="psychdescribe-function" class="level4">
<h4 class="anchored" data-anchor-id="psychdescribe-function"><strong>psych::describe() function</strong></h4>
<p>The <code>psych::describe()</code> function only works on numeric data. So, let’s look at <code>Age</code> and <code>bmiPRE</code>. This function now gives us the standard deviation <code>sd</code> and even the <code>mad</code> which is the mean absolute deviation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age, bmiPRE) <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       vars  n  mean    sd median trimmed   mad   min   max  range skew
Age       1 20 44.80 14.87  44.00   43.06 10.38 24.00  99.0  75.00 2.21
bmiPRE    2 20 33.78 31.53  27.65   27.79  3.17 10.59 166.1 155.52 3.66
       kurtosis   se
Age        6.10 3.32
bmiPRE    12.53 7.05</code></pre>
</div>
</div>
</section>
<section id="base-r-specific-statistics-functions" class="level4">
<h4 class="anchored" data-anchor-id="base-r-specific-statistics-functions"><strong>Base R specific statistics functions</strong></h4>
<p>There are many built-in functions in base R for computing specific statistics like <code>mean()</code>, <code>sd()</code> for standard deviation, <code>median()</code>, <code>min()</code>, <code>max()</code> and <code>quantile()</code> to get specific percentiles.</p>
<p>Let get some summary statistics for different variables in <code>mydata</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get min, max for Age</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(mydata<span class="sc">$</span>Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(mydata<span class="sc">$</span>Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>WAIT!? - why did I get <code>NA</code>? Since there is missing data in this dataset, we need to tell these R functions how to handle the missing data. We need to add <code>na.rm=TRUE</code> to remove the <code>NA</code>s and then compute the <code>min()</code> and <code>max()</code> for the non-missing values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(mydata<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(mydata<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 99</code></pre>
</div>
</div>
<p>If we want, we could get the non-parametric statistics of median (which is the 50th percentile), 25th and 75th percentiles for the interquartile range. Let’s get these statistics for <code>bmiPRE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get median bmiPRE</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and 25th and 75th percentiles for bmiPRE</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(mydata<span class="sc">$</span>bmiPRE,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27.65258</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(mydata<span class="sc">$</span>bmiPRE, </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">probs =</span> <span class="fl">0.25</span>,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     25% 
26.02911 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(mydata<span class="sc">$</span>bmiPRE, </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">probs =</span> <span class="fl">0.75</span>,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     75% 
29.79173 </code></pre>
</div>
</div>
<p>We can also get the <code>mean()</code> and <code>sd()</code> for <code>Height</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(mydata<span class="sc">$</span>Height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.55</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(mydata<span class="sc">$</span>Height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9795273</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="dplyrsummarize-function" class="level4">
<h4 class="anchored" data-anchor-id="dplyrsummarize-function"><strong>dplyr::summarize() function</strong></h4>
<p>The <code>dplyr</code> package also has a <code>summarize()</code> function you can use to get specific statistics of your choosing. For example, let’s get the <code>mean()</code> and <code>sd()</code> for <code>Age</code> in one code step.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_age =</span> <span class="fu">mean</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_age =</span> <span class="fu">sd</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_age sd_age
     &lt;dbl&gt;  &lt;dbl&gt;
1     44.8   14.9</code></pre>
</div>
</div>
<p>We can do this same code again but add the <code>dplyr::group_by()</code> function to add a grouping variable to get the statistics by.</p>
<p><strong>NOTE: The <code>dplyr::group_by()</code> function must come BEFORE <code>dplyr::summarise()</code>.</strong></p>
<p>Let’s get the summary stats (<code>mean</code> and <code>sd</code>) for <code>Age</code> by <code>GenderCoded.f</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(GenderCoded.f) <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_age =</span> <span class="fu">mean</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_age =</span> <span class="fu">sd</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  GenderCoded.f mean_age sd_age
  &lt;fct&gt;            &lt;dbl&gt;  &lt;dbl&gt;
1 Male              41.5   8.77
2 Female            50.6  20.5 
3 &lt;NA&gt;              35    NA   </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Each code step may result in different object classes
</div>
</div>
<div class="callout-body-container callout-body">
<p>As you work through a series of code steps in an analysis or computational workflow, each step may produce an output object with a different class.</p>
</div>
</div>
<p>Let’s look at each step of the code above to produce a table of means and standard deviations of <code>Age</code> by <code>GenderCoded.f</code>.</p>
<p><strong>STEP 1 - begin with the dataset</strong></p>
<p>We start with the dataset <code>mydata</code> which is a “tibble” “data.frame” since we imported the data using one of the <code>tidyverse</code> packages: <code>readr</code>, <code>readxl</code> or <code>haven</code> all of which create a <code>tbl_df</code> class object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p><strong>STEP 2 - create a “grouped” data.frame</strong></p>
<p>Notice that as soon as we use the <code>dplyr::group_by()</code> function, the result is an updated type of “tibble”“data.frame” which is now a <code>grouped_df</code> class object. This object class is described at <a href="https://dplyr.tidyverse.org/articles/grouping.html" target="_blank">https://dplyr.tidyverse.org/articles/grouping.html</a>.</p>
<p>The <code>grouped_df</code> is similar to:</p>
<ul>
<li>applying the <a href="https://www.ibm.com/docs/en/spss-statistics/30.0.0?topic=transformations-split-file" target="_blank"><code>SPLIT FILE</code> command in the SPSS software</a></li>
<li>or using the <code>BY</code> command in SAS to <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/basess/n0t6f5rx0tvsvfn1t1r0ndy4n3e7.htm" target="_blank">“work with grouped data”</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save the output of step 2</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>step2 <span class="ot">&lt;-</span> mydata <span class="sc">%&gt;%</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(GenderCoded.f)</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(step2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "grouped_df" "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p><strong>STEP 3 - after the summarise step</strong></p>
<p>After STEP 3, another <code>tbl_df</code> is created.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>step3 <span class="ot">&lt;-</span> mydata <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(GenderCoded.f) <span class="sc">%&gt;%</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_age =</span> <span class="fu">mean</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_age =</span> <span class="fu">sd</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(step3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Since this saved output object <code>step3</code> is a <code>tbl_df</code>, we can use it like any other “data.frame” object. For example, we can pull out the <code>mean_age</code> column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pull out the mean_age column using $</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>step3<span class="sc">$</span>mean_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 41.45455 50.62500 35.00000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pull out the sd_age column using select()</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>step3 <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sd_age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  sd_age
   &lt;dbl&gt;
1   8.77
2  20.5 
3  NA   </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="make-summary-tables" class="level3">
<h3 class="anchored" data-anchor-id="make-summary-tables">Make summary tables</h3>
<p>Creating nicely formatted summary tables is an active area of development in the R community. So, I’m sure there are new functions and packages that I may not have shown here. But here are a few packages I use often for making tables of summary statistics. Most of these are designed to work within a Rmarkdown document.</p>
<section id="arsenal-package-for-tables" class="level4">
<h4 class="anchored" data-anchor-id="arsenal-package-for-tables"><strong><code>arsenal</code> package for tables</strong></h4>
<p>The <code>arsenal</code> package is useful for making tables - especially with Rmarkdown - to be explained further in a later session <a href="module136_ReproducibleResearch.html">Module 1.3.6</a>. Learn more at <a href="https://mayoverse.github.io/arsenal/articles/tableby.html" target="_blank"><code>tableby()</code> vignette</a>.</p>
<p>Here is a quick example of some summary statistics for <code>Age</code>, <code>bmiPRE</code>, and <code>SES</code> by <code>GenderCoded.f</code> using the <code>tableby()</code> function.</p>
<p>First let’s add labels for <code>SES</code> and create a factor variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>SES.f <span class="ot">&lt;-</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(mydata<span class="sc">$</span>SES,</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"low income"</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"average income"</span>,</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"high income"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arsenal)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> <span class="fu">tableby</span>(GenderCoded.f <span class="sc">~</span> Age <span class="sc">+</span> bmiPRE <span class="sc">+</span>SES.f, </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> mydata)</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tab1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="caption-top table">
<colgroup>
<col style="width: 35%">
<col style="width: 19%">
<col style="width: 18%">
<col style="width: 19%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">Male (N=11)</th>
<th style="text-align: center;">Female (N=8)</th>
<th style="text-align: center;">Total (N=19)</th>
<th style="text-align: right;">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Age</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: right;">0.199</td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;Mean (SD)</td>
<td style="text-align: center;">41.455 (8.768)</td>
<td style="text-align: center;">50.625 (20.493)</td>
<td style="text-align: center;">45.316 (15.089)</td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;Range</td>
<td style="text-align: center;">24.000 - 52.000</td>
<td style="text-align: center;">35.000 - 99.000</td>
<td style="text-align: center;">24.000 - 99.000</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>bmiPRE</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: right;">0.370</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;Mean (SD)</td>
<td style="text-align: center;">40.230 (42.193)</td>
<td style="text-align: center;">26.347 (2.785)</td>
<td style="text-align: center;">34.384 (32.274)</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;Range</td>
<td style="text-align: center;">10.586 - 166.102</td>
<td style="text-align: center;">20.646 - 29.790</td>
<td style="text-align: center;">10.586 - 166.102</td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>SES.f</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: right;">0.625</td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;N-Miss</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;low income</td>
<td style="text-align: center;">2 (20.0%)</td>
<td style="text-align: center;">2 (25.0%)</td>
<td style="text-align: center;">4 (22.2%)</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;average income</td>
<td style="text-align: center;">7 (70.0%)</td>
<td style="text-align: center;">4 (50.0%)</td>
<td style="text-align: center;">11 (61.1%)</td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;high income</td>
<td style="text-align: center;">1 (10.0%)</td>
<td style="text-align: center;">2 (25.0%)</td>
<td style="text-align: center;">3 (16.7%)</td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</section>
<section id="gtsummary-package-for-tables" class="level4">
<h4 class="anchored" data-anchor-id="gtsummary-package-for-tables"><strong><code>gtsummary</code> package for tables</strong></h4>
<p>The <code>gtsummary</code> package is also useful for making tables. We can even use it to make nicely formatted tables in the “Viewer” window pane or in Rmarkdown. Learn more at <a href="https://www.danieldsjoberg.com/gtsummary/articles/tbl_summary.html" target="_blank"><code>tbl_summary()</code> vignette</a>.</p>
<p>Here is a quick example of some summary statistics for <code>Age</code> and <code>bmiPRE</code> by <code>GenderCoded.f</code> using the <code>tbl_summary()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age, bmiPRE, SES.f, GenderCoded.f) <span class="sc">%&gt;%</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> GenderCoded.f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tbl-tabprint" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="h!">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-tabprint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1
</figcaption>
<div aria-describedby="tbl-tabprint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">

</div>
</figure>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="tableone-package-for-making-summary-tables" class="level4">
<h4 class="anchored" data-anchor-id="tableone-package-for-making-summary-tables"><strong><code>tableone</code> package for making summary tables</strong></h4>
<p>The output produced from <code>tableone</code> is simple text output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tableone)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>tableone<span class="sc">::</span><span class="fu">CreateTableOne</span>(</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> mydata,</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Age"</span>, <span class="st">"bmiPRE"</span>, <span class="st">"SES.f"</span>),</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">strata =</span> <span class="st">"GenderCoded.f"</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    Stratified by GenderCoded.f
                     Male          Female        p      test
  n                     11             8                    
  Age (mean (SD))    41.45 (8.77)  50.62 (20.49)  0.199     
  bmiPRE (mean (SD)) 40.23 (42.19) 26.35 (2.79)   0.370     
  SES.f (%)                                       0.625     
     low income          2 (20.0)      2 (25.0)             
     average income      7 (70.0)      4 (50.0)             
     high income         1 (10.0)      2 (25.0)             </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="gmodels-package-for-r-x-c-tables" class="level4">
<h4 class="anchored" data-anchor-id="gmodels-package-for-r-x-c-tables"><strong><code>gmodels</code> package for R-x-C tables</strong></h4>
<p>If we want to look at a “cross-table” similar to output from SPSS or SAS, the <code>gmodels</code> package has the <code>CrossTable()</code> function that creates text-based tables similar to these other statistics software packages.</p>
<p>Let’s get the frequencies and columns percentages for SES by gender. The first variable is the row variable, the second is the column variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmodels)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="fu">CrossTable</span>(mydata<span class="sc">$</span>SES.f,          <span class="co"># row variable</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>           mydata<span class="sc">$</span>GenderCoded.f,  <span class="co"># column variable</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.t =</span> <span class="cn">FALSE</span>,        <span class="co"># turn off percent of total</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.r =</span> <span class="cn">FALSE</span>,        <span class="co"># turn off percent of row</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.c =</span> <span class="cn">TRUE</span>,         <span class="co"># turn on percent of column</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.chisq =</span> <span class="cn">FALSE</span>,    <span class="co"># turn off percent for chisq test</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">format =</span> <span class="st">"SPSS"</span>)       <span class="co"># format like SPSS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Cell Contents
|-------------------------|
|                   Count |
|          Column Percent |
|-------------------------|

Total Observations in Table:  18 

               | mydata$GenderCoded.f 
  mydata$SES.f |     Male  |   Female  | Row Total | 
---------------|-----------|-----------|-----------|
    low income |        2  |        2  |        4  | 
               |   20.000% |   25.000% |           | 
---------------|-----------|-----------|-----------|
average income |        7  |        4  |       11  | 
               |   70.000% |   50.000% |           | 
---------------|-----------|-----------|-----------|
   high income |        1  |        2  |        3  | 
               |   10.000% |   25.000% |           | 
---------------|-----------|-----------|-----------|
  Column Total |       10  |        8  |       18  | 
               |   55.556% |   44.444% |           | 
---------------|-----------|-----------|-----------|

 </code></pre>
</div>
</div>
</section>
<section id="table-inspiration" class="level4">
<h4 class="anchored" data-anchor-id="table-inspiration"><strong>Table Inspiration</strong></h4>
<p>Making effective, nicely formatted tables from R and Rmarkdown has been an active area of development these past few years. In fact, I encourage you to check out the winners of the last few Table Contests:</p>
<ul>
<li><a href="https://posit.co/blog/2024-table-contest-winners/" target="_blank">2024 Table Contest Winners</a></li>
<li><a href="https://posit.co/blog/winners-of-the-2022-table-contest/" target="_blank">2022 Table Contest Winners</a></li>
<li><a href="https://posit.co/blog/winners-of-the-2021-table-contest/" target="_blank">2021 Table Contest Winners</a></li>
</ul>
<p><strong>Other Table Resources and Packages include:</strong></p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown-cookbook/table-other.html" target="_blank">https://bookdown.org/yihui/rmarkdown-cookbook/table-other.html</a></li>
<li><a href="https://epirhandbook.com/en/new_pages/tables_descriptive.html" target="_blank">https://epirhandbook.com/en/new_pages/tables_descriptive.html</a></li>
<li><a href="https://cran.r-project.org/web/packages/gt/" target="_blank"><code>gt</code> package on CRAN</a> and <a href="https://gt.rstudio.com/" target="_blank"><code>gt package website</code></a></li>
<li><a href="https://cran.r-project.org/web/packages/kableExtra/" target="_blank"><code>kableExtra</code> package on CRAN</a> and <a href="https://haozhu233.github.io/kableExtra/" target="_blank"><code>kableExtra</code> package website</a></li>
<li><a href="https://cran.r-project.org/web/packages/flextable/" target="_blank"><code>flextable</code> package on CRAN</a> and <a href="https://davidgohel.github.io/flextable/" target="_blank"><code>flextable</code> package website</a> and <a href="https://ardata-fr.github.io/flextable-book/"><code>flextable</code> book</a></li>
<li><a href="https://cran.r-project.org/web/packages/huxtable/" target="_blank"><code>huxtable</code> package on CRAN</a></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="exportingsaving-data" class="level2">
<h2 class="anchored" data-anchor-id="exportingsaving-data">6. Exporting/Saving Data</h2>
<p>Throughout this lesson we have worked with the <code>mydata</code> dataset. We have made some changes and created new variables. Let’s save the updates to this little dataset for use in later modules.</p>
<section id="using-the-save-function" class="level3">
<h3 class="anchored" data-anchor-id="using-the-save-function">Using the <code>save()</code> function</h3>
<section id="save-mydata-as-.rdata-native-r-binary-format" class="level4">
<h4 class="anchored" data-anchor-id="save-mydata-as-.rdata-native-r-binary-format"><strong>Save <code>mydata</code> as <code>*.Rdata</code> native R binary format</strong></h4>
<p>As we move forward in our lesson modules, we will mostly be working with the “native” format for datafiles (and objects) which have the extension of <code>*.RData</code> or <code>*.rda</code>. These file formats are efficient in terms of saving memory and speed for faster loading of data.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R data binary formats registered with Library of Congress
</div>
</div>
<div class="callout-body-container callout-body">
<p>The “R Data Format Family (.rdata, .rda)” are registered with the <a href="https://www.loc.gov/preservation/digital/formats/fdd/fdd000470.shtml">Library of Congress</a> under the “Sustainability of Digital Formats”. The description summary states:</p>
<blockquote class="blockquote">
<p>“The RData format (usually with extension .rdata or .rda) is a format designed for use with R, a system for statistical computation and related graphics, for storing a complete R workspace or selected”objects” from a workspace in a form that can be loaded back by R. The save function in R has options that result in significantly different variants of the format. This description is for the family of formats created by save and closely related functions. A workspace in R is a collection of typed “objects” and may include much more than the typical tabular data that might be considered a “dataset,” including, for example, results of intermediate calculations and scripts in the R programming language. A workspace may also contain several datasets, which are termed “data frames” in R.”</p>
</blockquote>
</div>
</div>
<p>Let’s save the <code>mydata</code> data.frame object as “mydata.RData”, using the <code>save()</code> function. See <code>help(save, package = "base")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save the mydata dataset object</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mydata,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> <span class="st">"mydata.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="save-all-objects-in-global-environment-as-.rdata" class="level4">
<h4 class="anchored" data-anchor-id="save-all-objects-in-global-environment-as-.rdata"><strong>Save All Objects in Global Environment as <code>*.Rdata</code></strong></h4>
<p>It is worth noting that the code above specifically ONLY saves the <code>mydata</code> object. Assuming that your “Global Environment” was empty at the beginning of your computing session at the beginning of this Module 1.3.2, we have created 6 objects so far:</p>
<ul>
<li><code>foreignhistory</code> - created above looking at the CRAN history for the <code>foreign</code> package</li>
<li><code>havenhistory</code> - created above looking at the CRAN history for the <code>haven</code> package</li>
<li><code>mydata</code> - main dataset imported above</li>
<li><code>step2</code> - created to illustrate the <code>%&gt;%</code> stepwise programming workflow</li>
<li><code>step3</code> - created to illustrate the <code>%&gt;%</code> stepwise programming workflow</li>
<li><code>tab1</code> - created above to make a table using the <code>arsenal</code> package</li>
</ul>
<p><img src="globalenv_m132.png" class="img-fluid"></p>
<p>Suppose we want to save ALL of these objects for a future computing session or if you’d like to share all of these objects with someone else on your team.</p>
<p>We can save the whole Global Environment or select objects in the environment also to a <code>*.RData</code> file to be read back into a future computing session.</p>
<p>To save all objects in the Global Environment, we can use <code>save.image()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save all objects from module 1.3.2</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">"module132.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="save-more-than-one-object-in-global-environment-as-.rdata" class="level4">
<h4 class="anchored" data-anchor-id="save-more-than-one-object-in-global-environment-as-.rdata"><strong>Save More than One Object in Global Environment as <code>*.Rdata</code></strong></h4>
<p>To save one or more objects for future use - simply list the object names and then save them into an <code>*.RData</code> file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save mydata and tab1</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mydata, tab1,</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> <span class="st">"mydata_tab1.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reading-objects-saved-as-.rdata-back-into-session" class="level4">
<h4 class="anchored" data-anchor-id="reading-objects-saved-as-.rdata-back-into-session"><strong>Reading Objects Saved as <code>*.Rdata</code> Back Into Session</strong></h4>
<p>To test and make sure these items were saved as we expect, let’s remove all objects from our Global Environment and load them back in.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be careful using <code>rm(list= ls())</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>The use of the <code>rm(list= ls())</code> should NOT be used unless you know you have saved everything up to this point. Once you remove all objects from your Global Environment, it cannot be undone. You can either rerun the R code to recreate these objects, or go through the steps described below to <strong>save</strong> and <strong>re-load</strong> your objects into your session.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all objects</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check that global environment is empty</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<p><strong>Read back in only the <code>mydata</code> file.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in mydata</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"mydata.RData"</span>)</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check objects in global environment</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mydata"</code></pre>
</div>
</div>
<p>I’ll remove all objects again for to illustrate the next use of <code>load()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Read back in both the <code>mydata</code> and <code>tab1</code> objects</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in mydata_tab1</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"mydata_tab1.RData"</span>)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check objects in global environment</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mydata" "tab1"  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Read back in all objects saved from Module 1.3.2.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in module132.RData</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"module132.RData"</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check objects in global environment</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "foreignhistory" "havenhistory"   "mydata"         "step2"         
[5] "step3"          "tab1"          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="saveexport-data-to-other-formats" class="level3">
<h3 class="anchored" data-anchor-id="saveexport-data-to-other-formats">Save/export data to other formats</h3>
<p>In addition to use the built-in <code>save()</code> and <code>save.image()</code> functions, we can also export (or save) data objects from R into other formats like CSV and those for specific statistics software like SPSS (<code>*.sav</code>), SAS (<code>*.XPT</code>)and Stata (<code>*.dta</code>).</p>
<section id="exportwrite-csv-and-excel" class="level4">
<h4 class="anchored" data-anchor-id="exportwrite-csv-and-excel"><strong>Export/Write</strong> CSV and EXCEL</h4>
<p>In the <code>readr</code> package, we can use <code>write_csv()</code> to save our updated data as a CSV file which can be read by other software like Excel.</p>
<p>I’ll load the data back in and then save/export it as other formats.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in mydata</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"mydata.RData"</span>)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># write as CSV</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(mydata,</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">file =</span> <span class="st">"mydata_updated.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exportwrite-for-other-software-spss-sas-stata" class="level4">
<h4 class="anchored" data-anchor-id="exportwrite-for-other-software-spss-sas-stata"><strong>Export/Write</strong> for Other Software (SPSS, SAS, Stata)</h4>
<p>We can also use the <code>haven</code> package to export/save the updated <code>mydata</code> dataset as a SPSS (<code>*.sav</code>), SAS (<code>*.XPT</code>) or Stata (<code>*.dta</code>) file format.</p>
<p>Code to export to SPSS <code>*.sav</code> format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">write_sav</span>(mydata,</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"mydata_updated.sav"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rename variable “GenderCoded.f” and “SES.f” to “GenderCoded_f” and “SES_f” to export to SAS or Stata since the “*.f” won’t work in a variable name in these software.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rename GenderCoded.f and SES.f since the</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># xxx.f wont work for SAS or Stata</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)[<span class="fu">names</span>(mydata) <span class="sc">==</span> <span class="st">"GenderCoded.f"</span>] <span class="ot">&lt;-</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GenderCoded_f"</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)[<span class="fu">names</span>(mydata) <span class="sc">==</span> <span class="st">"SES.f"</span>] <span class="ot">&lt;-</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SES_f"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Code to export to SAS using the “XPT” format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">write_xpt</span>(mydata,</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"mydata_updated.xpt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Code to export to Stata <code>*.dta</code> format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">write_dta</span>(mydata,</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"mydata_updated.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you have these other statistical software on your computer, try opening these new exported files into that software to confirm they worked.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Some import/export work better than others
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be aware that many of these import/export functions do work pretty well, but some features of functionality of native formats used by other software packages may not work fully. Read the documentation for each package and function to understand what the limitations may be. For example, importing and exporting SAS <code>*.sas7bdat</code> formatted files can be problematic.</p>
</div>
</div>
<hr>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="r-code-for-this-module" class="level2">
<h2 class="anchored" data-anchor-id="r-code-for-this-module">R Code For This Module</h2>
<ul>
<li><a href="module_132.R"><code>module_132.R</code></a></li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-R-gmodels" class="csl-entry" role="listitem">
Bolker, Gregory R. Warnes andBen, Thomas Lumley, Randall C Johnson, and Randall C. Johnson. 2022. <em>Gmodels: Various r Programming Tools for Model Fitting</em>. <a href="https://CRAN.R-project.org/package=gmodels">https://CRAN.R-project.org/package=gmodels</a>.
</div>
<div id="ref-R-pkgsearch" class="csl-entry" role="listitem">
Csárdi, Gábor, and Maëlle Salmon. 2025. <em>Pkgsearch: Search and Query CRAN r Packages</em>. <a href="https://github.com/r-hub/pkgsearch">https://github.com/r-hub/pkgsearch</a>.
</div>
<div id="ref-R-arsenal" class="csl-entry" role="listitem">
Heinzen, Ethan, Jason Sinnwell, Elizabeth Atkinson, Tina Gunderson, and Gregory Dougherty. 2021. <em>Arsenal: An Arsenal of r Functions for Large-Scale Statistical Summaries</em>. <a href="https://github.com/mayoverse/arsenal">https://github.com/mayoverse/arsenal</a>.
</div>
<div id="ref-R-fontawesome" class="csl-entry" role="listitem">
Iannone, Richard. 2023. <em>Fontawesome: Easily Work with Font Awesome Icons</em>. <a href="https://github.com/rstudio/fontawesome">https://github.com/rstudio/fontawesome</a>.
</div>
<div id="ref-R-base" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-R-gtsummary" class="csl-entry" role="listitem">
Sjoberg, Daniel D., Joseph Larmarange, Michael Curry, Jessica Lavery, Karissa Whiting, and Emily C. Zabor. 2024. <em>Gtsummary: Presentation-Ready Data Summary and Analytic Result Tables</em>. <a href="https://github.com/ddsjoberg/gtsummary">https://github.com/ddsjoberg/gtsummary</a>.
</div>
<div id="ref-gtsummary" class="csl-entry" role="listitem">
Sjoberg, Daniel D., Karissa Whiting, Michael Curry, Jessica A. Lavery, and Joseph Larmarange. 2021. <span>“Reproducible Summary Tables with the Gtsummary Package.”</span> <em><span>The R Journal</span></em> 13: 570–80. <a href="https://doi.org/10.32614/RJ-2021-053">https://doi.org/10.32614/RJ-2021-053</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://dplyr.tidyverse.org">https://dplyr.tidyverse.org</a>.
</div>
<div id="ref-R-tableone" class="csl-entry" role="listitem">
Yoshida, Kazuki, and Alexander Bartel. 2022. <em>Tableone: Create Table 1 to Describe Baseline Characteristics with or Without Propensity Score Weights</em>. <a href="https://github.com/kaz-yos/tableone">https://github.com/kaz-yos/tableone</a>.
</div>
</div>
</section>
<section id="other-helpful-resources" class="level2">
<h2 class="anchored" data-anchor-id="other-helpful-resources">Other Helpful Resources</h2>
<p><a href="./additionalResources.html" target="_blank"><strong>Other Helpful Resources</strong></a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/emorytidal\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="https://img.shields.io/badge/License-CC_BY--NC--ND_4.0-lightgrey.svg" class="img-fluid"></a></p>
</div>   
    <div class="nav-footer-center">
<p>Copyright 2025, <a href="https://melindahiggins.netlify.app/">Melinda Higgins, PhD.</a> <a href="https://www.linkedin.com/in/melindahiggins2000/"><i class="fa-brands fa-linkedin" aria-label="linkedin"></i></a> <a href="https://scholar.google.com/citations?user=-4aU-VkAAAAJ&amp;hl=en"><i class="fa-brands fa-google-scholar" aria-label="google-scholar"></i></a> <a href="https://github.com/melindahiggins2000"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="mailto:mkhiggi@emory.edu"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>