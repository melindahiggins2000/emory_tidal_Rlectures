<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>PRAMS Data Analysis – R Training - TIDAL Lectures</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0f678b7eab269e1f93ad2a885b46ecea.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6c703c4903b7f250f915dd0acf0b5a99.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./PRAMS.html">PRAMS Data Analysis</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./tidal_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main">
    <a href="https://www.project-tidal.org/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <a href="https://github.com/melindahiggins2000/emory_tidal_Rlectures" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module131_IntroRRStudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.1: Introduction to R and R Studio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module132_DataWrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.2: Data Wrangling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module133_DataVis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.3: Data Visualization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module134_MissingWeight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.4: Missing Data and Sampling Weights</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module135_StatisticalTests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.5: Statistical Tests and Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module136_ReproducibleResearch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3.6: Reproducible Research Principles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PRAMS.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">PRAMS Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./additionalResources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Help and Resources</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#prams-data" id="toc-prams-data" class="nav-link active" data-scroll-target="#prams-data">PRAMS Data</a>
  <ul>
<li><a href="#about-prams" id="toc-about-prams" class="nav-link" data-scroll-target="#about-prams">About PRAMS</a></li>
  <li><a href="#getting-the-prams-data" id="toc-getting-the-prams-data" class="nav-link" data-scroll-target="#getting-the-prams-data">Getting the PRAMS Data</a></li>
  <li><a href="#prams-documentation-and-resources" id="toc-prams-documentation-and-resources" class="nav-link" data-scroll-target="#prams-documentation-and-resources">PRAMS Documentation and Resources</a></li>
  </ul>
</li>
  <li>
<a href="#prework---before-you-begin" id="toc-prework---before-you-begin" class="nav-link" data-scroll-target="#prework---before-you-begin">0. Prework - Before You Begin</a>
  <ul>
<li><a href="#install-r-packages" id="toc-install-r-packages" class="nav-link" data-scroll-target="#install-r-packages">Install R Packages</a></li>
  <li><a href="#create-a-new-rstudio-project" id="toc-create-a-new-rstudio-project" class="nav-link" data-scroll-target="#create-a-new-rstudio-project">Create a NEW RStudio Project</a></li>
  </ul>
</li>
  <li>
<a href="#get-prams-data-and-select-subset-for-analysis" id="toc-get-prams-data-and-select-subset-for-analysis" class="nav-link" data-scroll-target="#get-prams-data-and-select-subset-for-analysis">1. Get PRAMS Data and Select Subset for Analysis</a>
  <ul>
<li><a href="#a.-read-in-the-prams-phase-8-2016-2021-combined-dataset" id="toc-a.-read-in-the-prams-phase-8-2016-2021-combined-dataset" class="nav-link" data-scroll-target="#a.-read-in-the-prams-phase-8-2016-2021-combined-dataset">A. Read-in the PRAMS Phase 8 2016-2021 combined dataset</a></li>
  <li><a href="#b.-save-the-data-as-a-.rdata-binary-file-for-use-in-later-analyses" id="toc-b.-save-the-data-as-a-.rdata-binary-file-for-use-in-later-analyses" class="nav-link" data-scroll-target="#b.-save-the-data-as-a-.rdata-binary-file-for-use-in-later-analyses">B. Save the data as a <code>*.RData</code> binary file for use in later analyses</a></li>
  <li><a href="#c.-clean-up-files-to-save-memory" id="toc-c.-clean-up-files-to-save-memory" class="nav-link" data-scroll-target="#c.-clean-up-files-to-save-memory">C. Clean up files to save memory</a></li>
  </ul>
</li>
  <li>
<a href="#getting-started-with-prams-data" id="toc-getting-started-with-prams-data" class="nav-link" data-scroll-target="#getting-started-with-prams-data">2. Getting started with PRAMS Data</a>
  <ul>
<li><a href="#breastfeeding-summary---unweighted-data" id="toc-breastfeeding-summary---unweighted-data" class="nav-link" data-scroll-target="#breastfeeding-summary---unweighted-data">Breastfeeding summary - UNWEIGHTED data</a></li>
  <li><a href="#breastfeeding-summary---weighted-data" id="toc-breastfeeding-summary---weighted-data" class="nav-link" data-scroll-target="#breastfeeding-summary---weighted-data">Breastfeeding summary - WEIGHTED data</a></li>
  </ul>
</li>
  <li><a href="#data-wrangling-with-prams" id="toc-data-wrangling-with-prams" class="nav-link" data-scroll-target="#data-wrangling-with-prams">3. Data Wrangling with PRAMS</a></li>
  <li><a href="#visualizing-prams-data" id="toc-visualizing-prams-data" class="nav-link" data-scroll-target="#visualizing-prams-data">4. Visualizing PRAMS Data</a></li>
  <li><a href="#missing-data-in-prams" id="toc-missing-data-in-prams" class="nav-link" data-scroll-target="#missing-data-in-prams">5. Missing Data in PRAMS</a></li>
  <li><a href="#prams-statistical-tests-and-models" id="toc-prams-statistical-tests-and-models" class="nav-link" data-scroll-target="#prams-statistical-tests-and-models">6. PRAMS Statistical Tests and Models</a></li>
  <li><a href="#prams-reproducible-research-report" id="toc-prams-reproducible-research-report" class="nav-link" data-scroll-target="#prams-reproducible-research-report">7. PRAMS Reproducible Research Report</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#other-helpful-resources" id="toc-other-helpful-resources" class="nav-link" data-scroll-target="#other-helpful-resources">Other Helpful Resources</a></li>
  </ul><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="PRAMS.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">PRAMS Data Analysis</h1>
<p class="subtitle lead">(Asynchronous-Online)</p>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header><section id="prams-data" class="level2"><h2 class="anchored" data-anchor-id="prams-data">PRAMS Data</h2>
<section id="about-prams" class="level3"><h3 class="anchored" data-anchor-id="about-prams">About PRAMS</h3>
<p><a href="https://www.cdc.gov/prams/index.html">PRAMS</a> is the Pregnancy Risk Assessment Monitoring System (PRAMS). According to the CDC’s website for <a href="https://www.cdc.gov/prams/about/index.html">About PRAMS</a>:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is PRAMS?
</div>
</div>
<div class="callout-body-container callout-body">
<p>PRAMS is the Pregnancy Risk Assessment Monitoring System. It is a joint surveillance project between state, territorial, or local health departments and CDC’s Division of Reproductive Health. PRAMS was developed in 1987 to reduce infant morbidity and mortality by influencing maternal behaviors before, during, and immediately after live birth.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is the purpose of PRAMS?
</div>
</div>
<div class="callout-body-container callout-body">
<p>The purpose of PRAMS is to find out why some infants are born healthy and others are not. The survey asks new mothers questions about their pregnancy and their new infant. The questions give us important information about the mother and the infant and help us learn more about the impacts of health and behaviors.</p>
</div>
</div>
</section><section id="getting-the-prams-data" class="level3"><h3 class="anchored" data-anchor-id="getting-the-prams-data">Getting the PRAMS Data</h3>
<ul>
<li>You can request the <a href="https://www.cdc.gov/prams/php/data-research/index.html">PRAMS Data</a> from the CDC.</li>
<li>Once granted access, follow the instructions from the CDC to download the data and sign the data sharing agreement.</li>
<li>For the purposes of the TIDAL R training session, we will be working with <a href="https://www.cdc.gov/prams/php/data-research/codebooks-phase-8.html">PRAMS Phase 8 ARF (Automated Research File)</a> dataset.</li>
</ul></section><section id="prams-documentation-and-resources" class="level3"><h3 class="anchored" data-anchor-id="prams-documentation-and-resources">PRAMS Documentation and Resources</h3>
<ul>
<li>See the details on the <a href="https://www.cdc.gov/prams/php/questionnaires/index.html">PRAMS Questionnaires</a>.</li>
<li>Learn more about the <a href="https://www.cdc.gov/prams/php/methodology/index.html">PRAMS Data Methodology</a> including details on how the samples are weighted.</li>
<li>
<strong>Download and Read</strong> this helpful <a href="https://www.cdc.gov/prams/pdf/methodology/prams-design-methodology-508.pdf">paper on PRAMS design and methodology</a> (Shulman, D’Angelo, Harrison, Smith, and Warner, 2018).</li>
<li>There are also helpful tutorial videos on working with PRAMS data by <a href="https://www.astho.org/topic/population-health-prevention/women-infant-family-health/prams/">ASSOCIATION OF STATE AND TERRITORIAL HEALTH OFFICIALS (ASTHO.org)</a>.</li>
</ul>
<hr></section></section><section id="prework---before-you-begin" class="level2"><h2 class="anchored" data-anchor-id="prework---before-you-begin">0. Prework - Before You Begin</h2>
<section id="install-r-packages" class="level3"><h3 class="anchored" data-anchor-id="install-r-packages">Install R Packages</h3>
<p>Before you begin, please go ahead and install (or make sure these are already installed) on your computer for these following packages - these are all on CRAN, so you can install them using the RStudio Menu Tools/Install Packages interface:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/haven/index.html"><code>haven</code></a></li>
<li><a href="https://cran.r-project.org/web/packages/dplyr/index.html"><code>dplyr</code></a></li>
<li><a href="https://cran.r-project.org/web/packages/survey/index.html"><code>survey</code></a></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/">survey</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="create-a-new-rstudio-project" class="level3"><h3 class="anchored" data-anchor-id="create-a-new-rstudio-project">Create a NEW RStudio Project</h3>
<p><strong>BEFORE</strong> you being any new analysis project, it is <strong>ALWAYS</strong> a good idea to begin with the NEW RStudio project.</p>
<p>Go to the RStudio menu “File/New Project” and create your new project (ideally in a NEW directory, but it is also ok to use an exisiting directory/folder on your computer).</p>
<p>This new directory (or folder) will be where all of your files will “live” for your current analysis project.</p>
<p>See the step-by-step instructions for <a href="module132_DataWrangling.html#begin-with-a-new-project">creating a new RStudio project</a> in <a href="module132_DataWrangling.html">Module 1.3.2</a>.</p>
<hr>
<div style="page-break-after: always;"></div>
</section></section><section id="get-prams-data-and-select-subset-for-analysis" class="level2"><h2 class="anchored" data-anchor-id="get-prams-data-and-select-subset-for-analysis">1. Get PRAMS Data and Select Subset for Analysis</h2>
<section id="a.-read-in-the-prams-phase-8-2016-2021-combined-dataset" class="level3"><h3 class="anchored" data-anchor-id="a.-read-in-the-prams-phase-8-2016-2021-combined-dataset">A. Read-in the PRAMS Phase 8 2016-2021 combined dataset</h3>
<p>The PRAMS data provided by the CDC will be in SAS format (<code>*.sas7bdat</code>). We can read the native SAS file into R using the <code>haven</code> package and the <code><a href="https://haven.tidyverse.org/reference/read_sas.html">read_sas()</a></code> function.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Memory Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The size of the <code>phase8_arf_2016_2021.sas7bdat</code> dataset is a little over 1GB. So, make sure your computer has enough available memory to fully load this dataset. I will provide some more details below on how we can reduce the size of the dataset and improve the memory issues below.</p>
</div>
</div>
<p>You can check your available memory, by checking your “Global Environment” TAB (upper right window pane) click on the down arrow next to the icon with “XX MiB” just to the left of the little broom:</p>
<p><br></p>
<p><img src="prams_globalenv_01.png" class="img-fluid"></p>
<p><br></p>
<p>Click on the “Memory Usage Report” to see a detailed breakdown. This window will show:</p>
<ul>
<li>Memory used by R objects (in your “Global Environment”)</li>
<li>Memory used on your computer by your current R Session</li>
<li>Memory currently in use for everything currently running on your computer (all apps running - active and in background) - you can compare this to your “task manager” memory viewer.</li>
<li>Free System Memory - when this gets low the “XX MiB” graphic will change color from green - to yellow - to orange - to red. Once you get to red, your R session will most likely crash since there is not enough memory to perfom operations or run analyses.</li>
</ul>
<p>This is a screen shot of my computer (yours will look different) BEFORE I load the PRAMS dataset.</p>
<p><br></p>
<p><img src="prams_globalenv_02.png" class="img-fluid"></p>
<p><br></p>
<p>Run the following R code to load the PRAMS Phase 8 dataset into your R Session and check the “Global Environment”.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span>
<span><span class="va">prams</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://haven.tidyverse.org/reference/read_sas.html">read_sas</a></span><span class="op">(</span><span class="st">"phase8_arf_2016_2021.sas7bdat"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is my memory AFTER loading the PRAMS dataset into my “Global Environment”.</p>
<p><br></p>
<p><img src="prams_globalenv_03.png" class="img-fluid"></p>
<p><br></p>
<p><img src="prams_globalenv_04.png" class="img-fluid"></p>
<p><br></p>
</section><section id="b.-save-the-data-as-a-.rdata-binary-file-for-use-in-later-analyses" class="level3"><h3 class="anchored" data-anchor-id="b.-save-the-data-as-a-.rdata-binary-file-for-use-in-later-analyses">B. Save the data as a <code>*.RData</code> binary file for use in later analyses</h3>
<p>One way to reduce the size of the PRAMS dataset is to save it as a native <code>*.RData</code> binary file format. So, let’s save the PRAMS dataset in this format on your computer.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># save the whole dataset as *.RData format</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">prams</span>, </span>
<span>     file <span class="op">=</span> <span class="st">"prams.RData"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On my computer, here is a comparison of the size of these 2 files:</p>
<ul>
<li>
<code>phase8_arf_2016_2021.sas7bdat</code> is 1,095,499,776 bytes (which is 1.02 GB)</li>
<li>
<code>prams.RData</code> is only 34,713,319 (which is only 0.0323 GB)</li>
</ul>
<p><strong>This is a file size reduction of 96.83%!!</strong></p>
<p><br></p>
<p><img src="prams_filesizes.png" class="img-fluid"></p>
<p><br></p>
<p>Now that we’ve reduced the file size of the dataset on your computer’s hard drive (or cloud storage), let’s also clear up the “Global Environment” back in your current RStudio computing session.</p>
</section><section id="c.-clean-up-files-to-save-memory" class="level3"><h3 class="anchored" data-anchor-id="c.-clean-up-files-to-save-memory">C. Clean up files to save memory</h3>
<p>Now that we’ve saved the data, let’s remove the PRAMS data object from the RStudio session.</p>
<ul>
<li>For now we can simply remove everything using the <code>rm(list=ls())</code>.</li>
<li>However, if you have other objects you want to keep, you can specifically only remove the PRAMS dataset using <code>rm(prams)</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># remove all objects from Global Environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># confirm Global Environment is empty</span></span>
<span><span class="co"># list all objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># and free any currently unused memory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/gc.html">gc</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used  (Mb) gc trigger   (Mb)  max used  (Mb)
Ncells 2117797 113.2    4160094  222.2   4160094 222.2
Vcells 3873673  29.6  153306787 1169.7 112056277 855.0</code></pre>
</div>
</div>
<p>After we remove everything, let’s look at the session memory again.</p>
<p><br></p>
<p><img src="prams_globalenv_05.png" class="img-fluid"></p>
<p><br></p>
<p>Now let’s read the PRAMS data back in, but this time read in the <code>prams.RData</code> binary R data formatted file. We will use the built-in <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># load back only the prams dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"prams.RData"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check the R session memory again:</p>
<p><br></p>
<p><img src="prams_globalenv_06.png" class="img-fluid"></p>
<p><br></p>
<p>I know this didn’t make a large difference for the R session available memory, but by doing this process:</p>
<ol type="1">
<li>The PRAMS dataset now takes up less memory on your computer’s file storage, and</li>
<li>The <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> function for the <code>prams.RData</code> file should run faster when beginning your R computing session instead of having to use the <code>haven</code> package to read in the SAS formatted file everytime.</li>
</ol>
<p>As a quick comparison on my computer (Windows 11), the time to read in the SAS formatted file was about 14 sec:</p>
<pre><code>&gt; system.time(
+   prams &lt;- 
+     read_sas("phase8_arf_2016_2021.sas7bdat")
+ )
   user  system elapsed 
  13.44    0.47   13.96</code></pre>
<p>And the time to read in the <code>prams.RData</code> file was only about 1.5 sec.</p>
<pre><code>&gt; system.time(
+   load("prams.RData")
+ )
   user  system elapsed 
   1.45    0.08    1.54 </code></pre>
<hr>
<div style="page-break-after: always;"></div>
</section></section><section id="getting-started-with-prams-data" class="level2"><h2 class="anchored" data-anchor-id="getting-started-with-prams-data">2. Getting started with PRAMS Data</h2>
<section id="breastfeeding-summary---unweighted-data" class="level3"><h3 class="anchored" data-anchor-id="breastfeeding-summary---unweighted-data">Breastfeeding summary - UNWEIGHTED data</h3>
<p>Let’s look at whether the mother ever breastfed her baby - this is variable <code>BF5EVER</code>, where 1 = “NO” and 2 = “YES”.</p>
<p><a href="https://www.cdc.gov/prams/php/data-research/codebooks-phase-8.html">PRAMS Phase 8 Codebook</a></p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># create a factor variable</span></span>
<span><span class="co"># and add labels</span></span>
<span><span class="va">prams</span><span class="op">$</span><span class="va">BF5EVER.f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>  <span class="va">prams</span><span class="op">$</span><span class="va">BF5EVER</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NO"</span>, <span class="st">"YES"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the UNWEIGHTED data, let’s get a simple table of breastfeeding by STATE (variable <code>STATE</code>) and YEAR (variable <code>NEST_YR</code>).</p>
<p>As we can see below, in 2017 for the state of GA, 919 women responded to this question:</p>
<ul>
<li>919 women responded
<ul>
<li>170 said NO</li>
<li>749 said YES</li>
</ul>
</li>
<li>36 were missing a response (indicated by <code>&lt;NA&gt;</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NEST_YR</span> <span class="op">==</span> <span class="fl">2017</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">STATE</span>, <span class="va">BF5EVER.f</span>, </span>
<span>                useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     BF5EVER.f
STATE   NO  YES &lt;NA&gt;
   AK   71  927   47
   AL  181  659   42
   CO   73 1037   18
   DE  126  728   37
   GA  170  749   36
   IA  136  867   30
   IL  140 1048   36
   KS   81  856   58
   KY  139  536   27
   LA  285  586   23
   MA  115 1268   40
   MD   97  928   35
   ME   88  754   30
   MI  290 1532   75
   MO  166  908   37
   MT   66  851   20
   ND  102  472   17
   NH   42  523   15
   NJ  125 1102   31
   NM  123 1038   19
   NY  109  706   33
   PA  164 1023   42
   PR   81  928   23
   RI  105  960   37
   SD  150  946   35
   UT   93 1305   49
   VA   88  969   26
   VT   54  780   14
   WA   69 1138   31
   WI  221 1051   74
   WV  186  475   38
   WY   49  438   16
   YC   99 1125   69</code></pre>
</div>
</div>
<p>This aligns with the <a href="https://www.cdc.gov/prams/prams-data/mch-indicators/states/pdf/2020/georgia-prams-mch-indicators-508.pdf">CDC PRAMS Indicators Report for GA in 2020</a> - scroll to the bottom to see the RAW count of 919 women who responded to “Ever Breastfed” in GA in 2017.</p>
</section><section id="breastfeeding-summary---weighted-data" class="level3"><h3 class="anchored" data-anchor-id="breastfeeding-summary---weighted-data">Breastfeeding summary - WEIGHTED data</h3>
<p>In the <a href="https://www.cdc.gov/prams/prams-data/mch-indicators/states/pdf/2020/georgia-prams-mch-indicators-508.pdf">CDC PRAMS Indicators Report for GA in 2020</a> the columns that have the 95% CI (confidence intervals) for the percentages are the population weighted percentage estimates for the Stats of GA during that year.</p>
<p>To get the estimated percentage of women in the stats of GA who had “ever breastfed” in 2017, we need to use the <code>survey</code> package and apply the proper sample weighting to get these estimates.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's look at just GA to start with</span></span>
<span><span class="co"># use dplyr to filter out just GA</span></span>
<span><span class="va">prams_ga</span> <span class="op">&lt;-</span> <span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the survey design file for GA</span></span>
<span><span class="va">prams_ga.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams_ga</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a table of ever breastfed</span></span>
<span><span class="co"># by YEAR</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">BF5EVER.f</span>, <span class="op">~</span><span class="va">NEST_YR</span>,</span>
<span>      design <span class="op">=</span> <span class="va">prams_ga.svy</span>,</span>
<span>      <span class="va">svytotal</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     NEST_YR BF5EVER.fNO BF5EVER.fYES se.BF5EVER.fNO se.BF5EVER.fYES
2017    2017    17639.96    101686.10       2045.415        2271.075
2018    2018    20187.62     98909.35       2151.496        2351.330
2019    2019    24099.04     95019.86       2273.415        2279.851
2020    2020    21827.55     94125.72       2209.745        2457.097
2021    2021    23724.68     93896.73       2266.811        2256.488</code></pre>
</div>
</div>
<p>From this we can see that the population estimates for 2017 are:</p>
<ul>
<li>Breastfed ever = NO: 17639.96 +/- 2045.415</li>
<li>Breastfed ever = YES: 101686.10 +/- 2271.075</li>
</ul>
<p>This leads to a percentage of YES estimate of <code>101686.10 * 100 / (101686.10 + 17639.96)</code> = 85.2170096% which should match pretty closely to what is in the <a href="https://www.cdc.gov/prams/prams-data/mch-indicators/states/pdf/2020/georgia-prams-mch-indicators-508.pdf">CDC PRAMS Indicators Report for GA in 2020</a>.</p>
<p>We can also get the percentage of overall breastfeeding YES for the USA for the 40 “states” (technically 38 states, Puerto Rico, and New York City) that were included in the PRAMS dataset in 2020 (see the last column in the CDC report), using the following R code. <em>Note: 2 “states” did not have data in 2020: Connecticut and Florida.</em></p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># get overall for 2020 - all states</span></span>
<span><span class="co"># make survey design file</span></span>
<span><span class="va">prams.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">BF5EVER.f</span>, <span class="op">~</span><span class="va">NEST_YR</span>,</span>
<span>      design <span class="op">=</span> <span class="va">prams.svy</span>,</span>
<span>      <span class="va">svytotal</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     NEST_YR BF5EVER.fNO BF5EVER.fYES se.BF5EVER.fNO se.BF5EVER.fYES
2016    2016    187666.4      1324171       4398.541        4798.836
2017    2017    208863.1      1497127       4762.339        5452.232
2018    2018    242991.5      1716913       5220.222        5979.598
2019    2019    236841.9      1680987       5404.761        6877.697
2020    2020    225560.3      1609464       4884.871        5540.240
2021    2021    212618.8      1521303       5196.234        6058.572</code></pre>
</div>
</div>
<p>From this we can see that the population estimates for the “whole USA” for 2020 were:</p>
<ul>
<li>Breastfed ever = NO: 225560.3 +/- 4884.871</li>
<li>Breastfed ever = YES: 1609464 +/- 5540.240</li>
</ul>
<p>This leads to a percentage of YES estimate of <code>1609464 * 100 / (1609464 + 225560.3)</code> = 87.7080483% which is pretty close to what is in the <a href="https://www.cdc.gov/prams/prams-data/mch-indicators/states/pdf/2020/georgia-prams-mch-indicators-508.pdf">CDC PRAMS Indicators Report for GA in 2020</a> - with some numerical precision variation due to software algorithms.</p>
<p><strong>Congratulations on getting started with the PRAMS Dataset</strong></p>
</section></section><section id="data-wrangling-with-prams" class="level2"><h2 class="anchored" data-anchor-id="data-wrangling-with-prams">3. Data Wrangling with PRAMS</h2>
<p>Data wrangling with the PRAMS data isn’t much different from the methods already covered in <a href="https://emorytidal.netlify.app/module132_datawrangling">Module 1.3.2</a>.</p>
<p>Examples will be posted here working with the PRAMS Dataset for recoding, creating or modifying variables.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># create a factor variable</span></span>
<span><span class="co"># and add labels</span></span>
<span><span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN.f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>  <span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1 = DIDNT TAKE VITAMIN"</span>,</span>
<span>             <span class="st">"2 = 1-3 TIMES/WEEK"</span>,</span>
<span>             <span class="st">"3 = 4-6 TIMES/WEEK"</span>,</span>
<span>             <span class="st">"4 = EVERY DAY/WEEK"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create variable for anyone who</span></span>
<span><span class="co"># took vitamins 4+ times a week</span></span>
<span><span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN_4plus</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add labels, make a factor</span></span>
<span><span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN_4plus.f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>  <span class="va">prams</span><span class="op">$</span><span class="va">VITAMIN_4plus</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"3x/week or less"</span>,</span>
<span>             <span class="st">"4x/week or more"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get stats for 2020 for GA</span></span>
<span><span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NEST_YR</span> <span class="op">==</span> <span class="fl">2020</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">STATE</span>, <span class="va">VITAMIN_4plus.f</span>, </span>
<span>                useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     VITAMIN_4plus.f
STATE 3x/week or less 4x/week or more &lt;NA&gt;
   GA             443             247    2</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prams_ga</span> <span class="op">&lt;-</span> <span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the survey design file for GA</span></span>
<span><span class="va">prams_ga.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams_ga</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a table of vitamins 4+ times per week</span></span>
<span><span class="co"># by YEAR</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus.f</span>, <span class="op">~</span><span class="va">NEST_YR</span>,</span>
<span>      design <span class="op">=</span> <span class="va">prams_ga.svy</span>,</span>
<span>      <span class="va">svytotal</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     NEST_YR VITAMIN_4plus.f3x/week or less VITAMIN_4plus.f4x/week or more
2017    2017                       86492.91                       37312.18
2018    2018                       76796.28                       43028.81
2019    2019                       74523.87                       46236.67
2020    2020                       75313.80                       42263.67
2021    2021                       69861.41                       48766.71
     se.VITAMIN_4plus.f3x/week or less se.VITAMIN_4plus.f4x/week or more
2017                          2715.819                          2653.349
2018                          2817.611                          2732.988
2019                          2786.899                          2666.692
2020                          2779.229                          2802.984
2021                          2824.624                          2693.566</code></pre>
</div>
</div>
<p>The unweighted breakdown for GA in 2020</p>
<ul>
<li>NO Vitamins =&lt; 3x/wk 443 64.2%</li>
<li>YES Vitamins =&gt; 4x/wk 247 35.8%</li>
<li>Total 690</li>
</ul>
<p>Weighted Breakdown for GA in 2020</p>
<ul>
<li>NO Vitamins =&lt; 3x/wk 75313.80 +/- 2779.229 (64.1%) []</li>
<li>YES Vitamins =&gt; 4x/wk 42263.67 +/- 2802.984 (35.9%) [33.6%, 38.3%]</li>
<li>Total 117,577.47</li>
</ul>
<p>get proportions and ci’s</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prams_ga2000</span> <span class="op">&lt;-</span> <span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NEST_YR</span> <span class="op">==</span> <span class="fl">2020</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the survey design file for GA</span></span>
<span><span class="co"># for year 2020</span></span>
<span><span class="va">prams_ga2000.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html">svytable</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus</span>, </span>
<span>         <span class="va">prams_ga2000.svy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>VITAMIN_4plus
       0        1 
75313.80 42263.67 </code></pre>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyciprop.html">svyciprop</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus</span>, </span>
<span>          <span class="va">prams_ga2000.svy</span>, </span>
<span>          na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     2.5% 97.5%
VITAMIN_4plus 0.359 0.315 0.407</code></pre>
</div>
</div>
<p>Compare the results below to the EXCEL spreadsheet <a href="https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.cdc.gov%2Fprams%2Fmedia%2Ffiles%2F2024%2F08%2FPRAMS-MCH-Indicators-2016-2022-508.xlsx&amp;wdOrigin=BROWSELINK">Pregnancy Risk Assessment Monitoring System (PRAMS) MCH Indicators (standard version)</a> - see 2020 for GA - 1st set of indicators for Vitamins taken 4x a week or more.</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prams_ga2000</span> <span class="op">&lt;-</span> <span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NEST_YR</span> <span class="op">==</span> <span class="fl">2020</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the survey design file for GA</span></span>
<span><span class="co"># for year 2020</span></span>
<span><span class="va">prams_ga2000.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a table of vitamins 4+ times per week</span></span>
<span><span class="co"># by YEAR</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus.f</span>, <span class="op">~</span><span class="va">NEST_YR</span>,</span>
<span>      design <span class="op">=</span> <span class="va">prams_ga2000.svy</span>,</span>
<span>      <span class="va">svytotal</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     NEST_YR VITAMIN_4plus.f3x/week or less VITAMIN_4plus.f4x/week or more
2020    2020                        75313.8                       42263.67
     se.VITAMIN_4plus.f3x/week or less se.VITAMIN_4plus.f4x/week or more
2020                          2779.229                          2802.984</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># add custom statistic forconfidence intervals</span></span>
<span><span class="va">confidence_intervals</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">variable</span>, <span class="va">by</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co">## extract the confidence intervals and multiply to get percentages</span></span>
<span>  <span class="va">props</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyciprop.html">svyciprop</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span> <span class="st">"~"</span> , <span class="va">variable</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="va">data</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## extract the confidence intervals </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">props</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co">## make numeric and multiply for percentage</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>           <span class="co">## round to one digit</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                           <span class="co">## extract the numbers from matrix</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">.</span>, collapse <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>          <span class="co">## combine to single character</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ddsjoberg/gtsummary">gtsummary</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_svysummary.html">tbl_svysummary</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">prams_ga2000.svy</span>,</span>
<span>  include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">VITAMIN_4plus</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"{n} ({p}%)"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/add_n.html">add_n</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/add_stat.html">add_stat</a></span><span class="op">(</span>fns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="va">confidence_intervals</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/modify.html">modify_header</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      <span class="va">n</span> <span class="op">~</span> <span class="st">"**Weighted total (N)**"</span>,</span>
<span>      <span class="va">stat_0</span> <span class="op">~</span> <span class="st">"**Weighted Count**"</span>,</span>
<span>      <span class="va">add_stat_1</span> <span class="op">~</span> <span class="st">"**95%CI**"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="ldsmbkxonq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ldsmbkxonq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ldsmbkxonq thead, #ldsmbkxonq tbody, #ldsmbkxonq tfoot, #ldsmbkxonq tr, #ldsmbkxonq td, #ldsmbkxonq th {
  border-style: none;
}

#ldsmbkxonq p {
  margin: 0;
  padding: 0;
}

#ldsmbkxonq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ldsmbkxonq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ldsmbkxonq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ldsmbkxonq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ldsmbkxonq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ldsmbkxonq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldsmbkxonq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ldsmbkxonq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ldsmbkxonq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ldsmbkxonq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ldsmbkxonq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ldsmbkxonq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ldsmbkxonq .gt_spanner_row {
  border-bottom-style: hidden;
}

#ldsmbkxonq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ldsmbkxonq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ldsmbkxonq .gt_from_md > :first-child {
  margin-top: 0;
}

#ldsmbkxonq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ldsmbkxonq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ldsmbkxonq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ldsmbkxonq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ldsmbkxonq .gt_row_group_first td {
  border-top-width: 2px;
}

#ldsmbkxonq .gt_row_group_first th {
  border-top-width: 2px;
}

#ldsmbkxonq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldsmbkxonq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ldsmbkxonq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ldsmbkxonq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldsmbkxonq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldsmbkxonq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ldsmbkxonq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ldsmbkxonq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ldsmbkxonq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldsmbkxonq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ldsmbkxonq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldsmbkxonq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ldsmbkxonq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldsmbkxonq .gt_left {
  text-align: left;
}

#ldsmbkxonq .gt_center {
  text-align: center;
}

#ldsmbkxonq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ldsmbkxonq .gt_font_normal {
  font-weight: normal;
}

#ldsmbkxonq .gt_font_bold {
  font-weight: bold;
}

#ldsmbkxonq .gt_font_italic {
  font-style: italic;
}

#ldsmbkxonq .gt_super {
  font-size: 65%;
}

#ldsmbkxonq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ldsmbkxonq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ldsmbkxonq .gt_indent_1 {
  text-indent: 5px;
}

#ldsmbkxonq .gt_indent_2 {
  text-indent: 10px;
}

#ldsmbkxonq .gt_indent_3 {
  text-indent: 15px;
}

#ldsmbkxonq .gt_indent_4 {
  text-indent: 20px;
}

#ldsmbkxonq .gt_indent_5 {
  text-indent: 25px;
}

#ldsmbkxonq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ldsmbkxonq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead><tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Weighted total (N)</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">
<strong>Weighted Count</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
<th id="add_stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95%CI</strong></th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">VITAMIN_4plus</td>
<td class="gt_row gt_center" headers="n">117,577</td>
<td class="gt_row gt_center" headers="stat_0">42,264 (36%)</td>
<td class="gt_row gt_center" headers="add_stat_1">31.5-40.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Unknown</td>
<td class="gt_row gt_center" headers="n"><br></td>
<td class="gt_row gt_center" headers="stat_0">363</td>
<td class="gt_row gt_center" headers="add_stat_1"><br></td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr class="odd">
<td colspan="4" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%)</td>
</tr></tfoot>
</table>
</div>
</div>
</div>
</section><section id="visualizing-prams-data" class="level2"><h2 class="anchored" data-anchor-id="visualizing-prams-data">4. Visualizing PRAMS Data</h2>
<p>Examples will be posted here for making graphs and figures with suggestions on handling very large datasets.</p>
<p>let’s look at maternal age variable <code>MAT_AGE_PU</code>, see <a href="https://www.cdc.gov/prams/php/data-research/codebooks-phase-8.html">PRAMS Codebook</a>.</p>
<p>Histogram of Maternal Age - Unweighted</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">prams</span><span class="op">$</span><span class="va">MAT_AGE_PU</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Histogram of Maternal Age - Complex Survey Weighted</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># use survey design data</span></span>
<span><span class="co"># get histogram using svyhist() function</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyhist.html">svyhist</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="op">~</span><span class="va">MAT_AGE_PU</span>,</span>
<span>        design <span class="op">=</span> <span class="va">prams.svy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Maternal weight gain in lbs</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># MOMLBS</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">prams</span><span class="op">$</span><span class="va">MOMLBS</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">prams</span><span class="op">$</span><span class="va">MOMLBS</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00   19.00   28.00   28.48   37.00   97.00    6275 </code></pre>
</div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyhist.html">svyhist</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="op">~</span><span class="va">MOMLBS</span>,</span>
<span>        design <span class="op">=</span> <span class="va">prams.svy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>scatterplot of weight gain by age</p>
<p>look at ga for 2020</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">prams_ga2000</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">MAT_AGE_PU</span>, y<span class="op">=</span><span class="va">MOMLBS</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>weighted plot - notice the varying sizes of the dots (bubbles)</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyplot.html">svyplot</a></span><span class="op">(</span><span class="va">MOMLBS</span><span class="op">~</span><span class="va">MAT_AGE_PU</span>, </span>
<span>        <span class="va">prams_ga2000.svy</span>,</span>
<span>        style <span class="op">=</span> <span class="st">"bubble"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>another option - gray scale hex symbols - darker indicate higher counts, see <code><a href="https://rdrr.io/pkg/survey/man/svyplot.html">help(svyplot, package = "survey")</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyplot.html">svyplot</a></span><span class="op">(</span><span class="va">MOMLBS</span><span class="op">~</span><span class="va">MAT_AGE_PU</span>, </span>
<span>        <span class="va">prams_ga2000.svy</span>,</span>
<span>        style <span class="op">=</span> <span class="st">"grayhex"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="PRAMS_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section><section id="missing-data-in-prams" class="level2"><h2 class="anchored" data-anchor-id="missing-data-in-prams">5. Missing Data in PRAMS</h2>
<p>Examples will be posted here for summarizing and visualizing missing data in PRAMS.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prams_ga2000</span> <span class="op">&lt;-</span> <span class="va">prams</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">STATE</span> <span class="op">==</span> <span class="st">"GA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NEST_YR</span> <span class="op">==</span> <span class="fl">2020</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># amount of missing data for VITAMIN</span></span>
<span><span class="co"># unweighted</span></span>
<span> <span class="co">#   1    2    3    4 &lt;NA&gt; </span></span>
<span> <span class="co"># 390   53   33  214    2</span></span>
<span><span class="co"># 2/692 = 0.289%</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   1    2    3    4 &lt;NA&gt; 
 390   53   33  214    2 </code></pre>
</div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># add missing indicator for VITAMIN</span></span>
<span><span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN_na</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># create the survey design file for GA</span></span>
<span><span class="co"># for year 2020</span></span>
<span><span class="va">prams_ga2000.svy</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span><span class="fl">0</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">SUD_NEST</span>, </span>
<span>            fpc <span class="op">=</span> <span class="op">~</span><span class="va">TOTCNT</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">WTANAL</span>, </span>
<span>            data <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_svysummary.html">tbl_svysummary</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">prams_ga2000.svy</span>,</span>
<span>  include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">VITAMIN_na</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"{n} ({p}%)"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/add_n.html">add_n</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/add_stat.html">add_stat</a></span><span class="op">(</span>fns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="va">confidence_intervals</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/modify.html">modify_header</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      <span class="va">n</span> <span class="op">~</span> <span class="st">"**Weighted total (N)**"</span>,</span>
<span>      <span class="va">stat_0</span> <span class="op">~</span> <span class="st">"**Weighted Count**"</span>,</span>
<span>      <span class="va">add_stat_1</span> <span class="op">~</span> <span class="st">"**95%CI**"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="swthdvyfmm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#swthdvyfmm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#swthdvyfmm thead, #swthdvyfmm tbody, #swthdvyfmm tfoot, #swthdvyfmm tr, #swthdvyfmm td, #swthdvyfmm th {
  border-style: none;
}

#swthdvyfmm p {
  margin: 0;
  padding: 0;
}

#swthdvyfmm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#swthdvyfmm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#swthdvyfmm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#swthdvyfmm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#swthdvyfmm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#swthdvyfmm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swthdvyfmm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#swthdvyfmm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#swthdvyfmm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#swthdvyfmm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#swthdvyfmm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#swthdvyfmm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#swthdvyfmm .gt_spanner_row {
  border-bottom-style: hidden;
}

#swthdvyfmm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#swthdvyfmm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#swthdvyfmm .gt_from_md > :first-child {
  margin-top: 0;
}

#swthdvyfmm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#swthdvyfmm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#swthdvyfmm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#swthdvyfmm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#swthdvyfmm .gt_row_group_first td {
  border-top-width: 2px;
}

#swthdvyfmm .gt_row_group_first th {
  border-top-width: 2px;
}

#swthdvyfmm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#swthdvyfmm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#swthdvyfmm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#swthdvyfmm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swthdvyfmm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#swthdvyfmm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#swthdvyfmm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#swthdvyfmm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#swthdvyfmm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swthdvyfmm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#swthdvyfmm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#swthdvyfmm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#swthdvyfmm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#swthdvyfmm .gt_left {
  text-align: left;
}

#swthdvyfmm .gt_center {
  text-align: center;
}

#swthdvyfmm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#swthdvyfmm .gt_font_normal {
  font-weight: normal;
}

#swthdvyfmm .gt_font_bold {
  font-weight: bold;
}

#swthdvyfmm .gt_font_italic {
  font-style: italic;
}

#swthdvyfmm .gt_super {
  font-size: 65%;
}

#swthdvyfmm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#swthdvyfmm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#swthdvyfmm .gt_indent_1 {
  text-indent: 5px;
}

#swthdvyfmm .gt_indent_2 {
  text-indent: 10px;
}

#swthdvyfmm .gt_indent_3 {
  text-indent: 15px;
}

#swthdvyfmm .gt_indent_4 {
  text-indent: 20px;
}

#swthdvyfmm .gt_indent_5 {
  text-indent: 25px;
}

#swthdvyfmm .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#swthdvyfmm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Weighted total (N)</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">
<strong>Weighted Count</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
<th id="add_stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95%CI</strong></th>
</tr></thead>
<tbody class="gt_table_body"><tr class="odd">
<td class="gt_row gt_left" headers="label">VITAMIN_na</td>
<td class="gt_row gt_center" headers="n">117,940</td>
<td class="gt_row gt_center" headers="stat_0">363 (0.3%)</td>
<td class="gt_row gt_center" headers="add_stat_1">0.1-1.8</td>
</tr></tbody>
<tfoot class="gt_footnotes"><tr class="odd">
<td colspan="4" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%)</td>
</tr></tfoot>
</table>
</div>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># weighted 0.3%, CI: 0.1 to 1.8%</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="prams-statistical-tests-and-models" class="level2"><h2 class="anchored" data-anchor-id="prams-statistical-tests-and-models">6. PRAMS Statistical Tests and Models</h2>
<p>Examples will be posted here for statistical tests and models (such as linear and logistic regression) for both the unweighted and weighted data approaches.</p>
<p>association of age and weight gain - linear regression</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">lm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">MOMLBS</span> <span class="op">~</span> <span class="va">MAT_AGE_PU</span>,</span>
<span>          data <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lm1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MOMLBS ~ MAT_AGE_PU, data = prams_ga2000)

Residuals:
    Min      1Q  Median      3Q     Max 
-29.566  -8.733  -1.089   8.161  68.722 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 26.23389    2.80325   9.358   &lt;2e-16 ***
MAT_AGE_PU   0.07572    0.09545   0.793    0.428    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 15.18 on 686 degrees of freedom
  (4 observations deleted due to missingness)
Multiple R-squared:  0.0009166, Adjusted R-squared:  -0.0005398 
F-statistic: 0.6294 on 1 and 686 DF,  p-value: 0.4279</code></pre>
</div>
</div>
<p>weighted</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html">svyglm</a></span><span class="op">(</span><span class="va">MOMLBS</span> <span class="op">~</span> <span class="va">MAT_AGE_PU</span>, </span>
<span>               design <span class="op">=</span> <span class="va">prams_ga2000.svy</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
svyglm(formula = MOMLBS ~ MAT_AGE_PU, design = prams_ga2000.svy)

Survey design:
svydesign(ids = ~0, strata = ~SUD_NEST, fpc = ~TOTCNT, weights = ~WTANAL, 
    data = prams_ga2000)

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 30.210104   3.935380   7.677 5.65e-14 ***
MAT_AGE_PU  -0.005842   0.135304  -0.043    0.966    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 231.9695)

Number of Fisher Scoring iterations: 2</code></pre>
</div>
</div>
<p>contingency tables - vitamin use by breastfeeding</p>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN_4plus.f</span>, </span>
<span>      <span class="va">prams_ga2000</span><span class="op">$</span><span class="va">BF5EVER.f</span>,</span>
<span>      useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 
                   NO YES &lt;NA&gt;
  3x/week or less  95 337   11
  4x/week or more  18 225    4
  &lt;NA&gt;              1   1    0</code></pre>
</div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gmodels</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gmodels/man/CrossTable.html">CrossTable</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">$</span><span class="va">VITAMIN_4plus.f</span>, </span>
<span>           y <span class="op">=</span> <span class="va">prams_ga2000</span><span class="op">$</span><span class="va">BF5EVER.f</span>,</span>
<span>           expected <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           prop.r <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           prop.c <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           prop.t <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           prop.chisq <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           chisq <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           format <span class="op">=</span> <span class="st">"SPSS"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Cell Contents
|-------------------------|
|                   Count |
|         Expected Values |
|          Column Percent |
|-------------------------|

Total Observations in Table:  675 

                             | prams_ga2000$BF5EVER.f 
prams_ga2000$VITAMIN_4plus.f |       NO  |      YES  | Row Total | 
-----------------------------|-----------|-----------|-----------|
             3x/week or less |       95  |      337  |      432  | 
                             |   72.320  |  359.680  |           | 
                             |   84.071% |   59.964% |           | 
-----------------------------|-----------|-----------|-----------|
             4x/week or more |       18  |      225  |      243  | 
                             |   40.680  |  202.320  |           | 
                             |   15.929% |   40.036% |           | 
-----------------------------|-----------|-----------|-----------|
                Column Total |      113  |      562  |      675  | 
                             |   16.741% |   83.259% |           | 
-----------------------------|-----------|-----------|-----------|

 
Statistics for All Table Factors


Pearson's Chi-squared test 
------------------------------------------------------------
Chi^2 =  23.72972     d.f. =  1     p =  1.108573e-06 

Pearson's Chi-squared test with Yates' continuity correction 
------------------------------------------------------------
Chi^2 =  22.69497     d.f. =  1     p =  1.898642e-06 

 
       Minimum expected frequency: 40.68 </code></pre>
</div>
</div>
<p>weighted</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html">svytable</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus.f</span> <span class="op">+</span> <span class="va">BF5EVER.f</span>, </span>
<span>         <span class="va">prams_ga2000.svy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 BF5EVER.f
VITAMIN_4plus.f          NO       YES
  3x/week or less 18458.169 55008.856
  4x/week or more  3334.398 38789.322</code></pre>
</div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html">svychisq</a></span><span class="op">(</span><span class="op">~</span><span class="va">VITAMIN_4plus.f</span> <span class="op">+</span> <span class="va">BF5EVER.f</span>, </span>
<span>         <span class="va">prams_ga2000.svy</span>, </span>
<span>         statistic <span class="op">=</span> <span class="st">"Chisq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's X^2: Rao &amp; Scott adjustment

data:  svychisq(~VITAMIN_4plus.f + BF5EVER.f, prams_ga2000.svy, statistic = "Chisq")
X-squared = 31.025, df = 1, p-value = 1.222e-05</code></pre>
</div>
</div>
<p>logistic regression</p>
<p>look at vitamin use by breastfeeding and maternal age</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">glm1</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">VITAMIN_4plus</span> <span class="op">~</span> <span class="va">MAT_AGE_PU</span> <span class="op">+</span> <span class="va">BF5EVER.f</span>,</span>
<span>           data <span class="op">=</span> <span class="va">prams_ga2000</span>,</span>
<span>           family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_regression.html">tbl_regression</a></span><span class="op">(</span><span class="va">glm1</span>,</span>
<span>                          exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="rgpwaipvka" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rgpwaipvka table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rgpwaipvka thead, #rgpwaipvka tbody, #rgpwaipvka tfoot, #rgpwaipvka tr, #rgpwaipvka td, #rgpwaipvka th {
  border-style: none;
}

#rgpwaipvka p {
  margin: 0;
  padding: 0;
}

#rgpwaipvka .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rgpwaipvka .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rgpwaipvka .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rgpwaipvka .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rgpwaipvka .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rgpwaipvka .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rgpwaipvka .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rgpwaipvka .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rgpwaipvka .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rgpwaipvka .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rgpwaipvka .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rgpwaipvka .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rgpwaipvka .gt_spanner_row {
  border-bottom-style: hidden;
}

#rgpwaipvka .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rgpwaipvka .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rgpwaipvka .gt_from_md > :first-child {
  margin-top: 0;
}

#rgpwaipvka .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rgpwaipvka .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rgpwaipvka .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rgpwaipvka .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rgpwaipvka .gt_row_group_first td {
  border-top-width: 2px;
}

#rgpwaipvka .gt_row_group_first th {
  border-top-width: 2px;
}

#rgpwaipvka .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rgpwaipvka .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rgpwaipvka .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rgpwaipvka .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rgpwaipvka .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rgpwaipvka .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rgpwaipvka .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rgpwaipvka .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rgpwaipvka .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rgpwaipvka .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rgpwaipvka .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rgpwaipvka .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rgpwaipvka .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rgpwaipvka .gt_left {
  text-align: left;
}

#rgpwaipvka .gt_center {
  text-align: center;
}

#rgpwaipvka .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rgpwaipvka .gt_font_normal {
  font-weight: normal;
}

#rgpwaipvka .gt_font_bold {
  font-weight: bold;
}

#rgpwaipvka .gt_font_italic {
  font-style: italic;
}

#rgpwaipvka .gt_super {
  font-size: 65%;
}

#rgpwaipvka .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rgpwaipvka .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rgpwaipvka .gt_indent_1 {
  text-indent: 5px;
}

#rgpwaipvka .gt_indent_2 {
  text-indent: 10px;
}

#rgpwaipvka .gt_indent_3 {
  text-indent: 15px;
}

#rgpwaipvka .gt_indent_4 {
  text-indent: 20px;
}

#rgpwaipvka .gt_indent_5 {
  text-indent: 25px;
}

#rgpwaipvka .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rgpwaipvka div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead><tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">
<strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
<th id="conf.low" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">
<strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>p-value</strong></th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Maternal age grouped</td>
<td class="gt_row gt_center" headers="estimate">1.07</td>
<td class="gt_row gt_center" headers="conf.low">1.04, 1.11</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">BF5EVER.f</td>
<td class="gt_row gt_center" headers="estimate"><br></td>
<td class="gt_row gt_center" headers="conf.low"><br></td>
<td class="gt_row gt_center" headers="p.value"><br></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;NO</td>
<td class="gt_row gt_center" headers="estimate">—</td>
<td class="gt_row gt_center" headers="conf.low">—</td>
<td class="gt_row gt_center" headers="p.value"><br></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;YES</td>
<td class="gt_row gt_center" headers="estimate">2.82</td>
<td class="gt_row gt_center" headers="conf.low">1.67, 4.99</td>
<td class="gt_row gt_center" headers="p.value">&lt;0.001</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr class="odd">
<td colspan="4" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
</tr></tfoot>
</table>
</div>
</div>
</div>
<p>weighted</p>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wtglm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html">svyglm</a></span><span class="op">(</span><span class="va">VITAMIN_4plus</span> <span class="op">~</span> <span class="va">MAT_AGE_PU</span> <span class="op">+</span> <span class="va">BF5EVER.f</span>, </span>
<span>                 design <span class="op">=</span> <span class="va">prams_ga2000.svy</span>,</span>
<span>                 family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html">quasibinomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wtglm1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
svyglm(formula = VITAMIN_4plus ~ MAT_AGE_PU + BF5EVER.f, design = prams_ga2000.svy, 
    family = quasibinomial())

Survey design:
svydesign(ids = ~0, strata = ~SUD_NEST, fpc = ~TOTCNT, weights = ~WTANAL, 
    data = prams_ga2000)

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  -3.36672    0.60317  -5.582 3.46e-08 ***
MAT_AGE_PU    0.06250    0.01901   3.287 0.001064 ** 
BF5EVER.fYES  1.18775    0.33359   3.561 0.000396 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for quasibinomial family taken to be 1.006803)

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="va">wtglm1</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept)   MAT_AGE_PU BF5EVER.fYES 
   0.0345025    1.0644955    3.2797036 </code></pre>
</div>
</div>
</section><section id="prams-reproducible-research-report" class="level2"><h2 class="anchored" data-anchor-id="prams-reproducible-research-report">7. PRAMS Reproducible Research Report</h2>
<p>A Rmarkdown analysis report will be provided here as a template to “kick start” your research with the PRAMS dataset.</p>
<ol type="1">
<li>Download this Rmarkdown template <a href="prams_report.Rmd">PRAMS Report</a>.</li>
<li>Knit to HTML</li>
<li>Knit to DOC</li>
<li>Knit to PDF (if you’ve installed <code>tinytex</code> package)</li>
<li>Knit with Parameters - Change the year from 2020 to 2018 and re-knit the document</li>
</ol>
<hr>
<div style="page-break-after: always;"></div>
</section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-R-Matrix" class="csl-entry" role="listitem">
Bates, Douglas, Martin Maechler, and Mikael Jagan. 2024. <em>Matrix: Sparse and Dense Matrix Classes and Methods</em>. <a href="https://Matrix.R-forge.R-project.org">https://Matrix.R-forge.R-project.org</a>.
</div>
<div id="ref-R-knitcitations" class="csl-entry" role="listitem">
Boettiger, Carl. 2021. <em>Knitcitations: Citations for Knitr Markdown Files</em>. <a href="https://github.com/cboettig/knitcitations">https://github.com/cboettig/knitcitations</a>.
</div>
<div id="ref-survey2004" class="csl-entry" role="listitem">
Lumley, Thomas. 2004. <span>“Analysis of Complex Survey Samples.”</span> <em>Journal of Statistical Software</em> 9 (1): 1–19.
</div>
<div id="ref-survey2010" class="csl-entry" role="listitem">
———. 2010. <em>Complex Surveys: A Guide to Analysis Using r: A Guide to Analysis Using r</em>. John Wiley; Sons.
</div>
<div id="ref-R-survey" class="csl-entry" role="listitem">
Lumley, Thomas, Peter Gao, and Ben Schneider. 2024. <em>Survey: Analysis of Complex Survey Samples</em>. <a href="http://r-survey.r-forge.r-project.org/survey/">http://r-survey.r-forge.r-project.org/survey/</a>.
</div>
<div id="ref-R-base" class="csl-entry" role="listitem">
R Core Team. 2025. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-Shulman_2018" class="csl-entry" role="listitem">
Shulman, Holly B., Denise V. D’Angelo, Leslie Harrison, Ruben A. Smith, and Lee Warner. 2018. <span>“The Pregnancy Risk Assessment Monitoring System (PRAMS): Overview of Design and Methodology.”</span> <em>American Journal of Public Health</em> 108 (10): 1305–13. <a href="https://doi.org/10.2105/ajph.2018.304563">https://doi.org/10.2105/ajph.2018.304563</a>.
</div>
<div id="ref-R-gtsummary" class="csl-entry" role="listitem">
Sjoberg, Daniel D., Joseph Larmarange, Michael Curry, Jessica Lavery, Karissa Whiting, and Emily C. Zabor. 2024. <em>Gtsummary: Presentation-Ready Data Summary and Analytic Result Tables</em>. <a href="https://github.com/ddsjoberg/gtsummary">https://github.com/ddsjoberg/gtsummary</a>.
</div>
<div id="ref-gtsummary" class="csl-entry" role="listitem">
Sjoberg, Daniel D., Karissa Whiting, Michael Curry, Jessica A. Lavery, and Joseph Larmarange. 2021. <span>“Reproducible Summary Tables with the Gtsummary Package.”</span> <em><span>The R Journal</span></em> 13: 570–80. <a href="https://doi.org/10.32614/RJ-2021-053">https://doi.org/10.32614/RJ-2021-053</a>.
</div>
<div id="ref-survival-book" class="csl-entry" role="listitem">
Terry M. Therneau, and Patricia M. Grambsch. 2000. <em>Modeling Survival Data: Extending the <span>C</span>ox Model</em>. New York: Springer.
</div>
<div id="ref-R-survival" class="csl-entry" role="listitem">
Therneau, Terry M. 2024. <em>Survival: Survival Analysis</em>. <a href="https://github.com/therneau/survival">https://github.com/therneau/survival</a>.
</div>
<div id="ref-R-gmodels" class="csl-entry" role="listitem">
Warnes, Gregory R., Ben Bolker, Thomas Lumley, Randall C Johnson. Contributions from Randall C. Johnson are Copyright SAIC-Frederick, Inc. Funded by the Intramural Research Program, of the NIH, National Cancer Institute, and Center for Cancer Research under NCI Contract NO1-CO-12400. 2022. <em>Gmodels: Various r Programming Tools for Model Fitting</em>. <a href="https://doi.org/10.32614/CRAN.package.gmodels">https://doi.org/10.32614/CRAN.package.gmodels</a>.
</div>
<div id="ref-ggplot22016" class="csl-entry" role="listitem">
Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-R-ggplot2" class="csl-entry" role="listitem">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, Dewey Dunnington, and Teun van den Brand. 2024. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://dplyr.tidyverse.org">https://dplyr.tidyverse.org</a>.
</div>
<div id="ref-R-haven" class="csl-entry" role="listitem">
Wickham, Hadley, Evan Miller, and Danny Smith. 2023. <em>Haven: Import and Export SPSS, Stata and SAS Files</em>. <a href="https://haven.tidyverse.org">https://haven.tidyverse.org</a>.
</div>
</div>
</section><section id="other-helpful-resources" class="level2"><h2 class="anchored" data-anchor-id="other-helpful-resources">Other Helpful Resources</h2>
<p><a href="./additionalResources.html"><strong>Other Helpful Resources</strong></a></p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/emorytidal\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="https://img.shields.io/badge/License-CC_BY--NC--ND_4.0-lightgrey.svg" class="img-fluid"></a></p>
</div>   
    <div class="nav-footer-center">
<p>Copyright 2025, <a href="https://melindahiggins.netlify.app/">Melinda Higgins, PhD.</a> <a href="https://www.linkedin.com/in/melindahiggins2000/"><i class="fa-brands fa-linkedin" aria-label="linkedin"></i></a> <a href="https://scholar.google.com/citations?user=-4aU-VkAAAAJ&amp;hl=en"><i class="fa-brands fa-google-scholar" aria-label="google-scholar"></i></a> <a href="https://github.com/melindahiggins2000"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="mailto:mkhiggi@emory.edu"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>